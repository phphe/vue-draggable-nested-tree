{"version":3,"file":"vue-draggable-nested-tree.min.js","sources":["../node_modules/helper-js/dist/helper-js.es.js","../node_modules/tree-helper/node_modules/helper-js/dist/helper-js.es.js","../node_modules/tree-helper/dist/tree-helper.esm.js","../src/components/TreeNode.vue","../src/components/Tree.vue","../node_modules/drag-event-service/dist/drag-event-service.es.js","../node_modules/draggable-helper/dist/draggable-helper.es.js","../src/plugins/Cache.js","../src/plugins/utils.js","../src/components/autoMoveDragPlaceHolder.js","../src/components/DraggableTreeNode.vue","../src/components/DraggableTree.vue"],"sourcesContent":["/*!\n * helper-js v1.1.3\n * (c) 2018-present phphe <phphe@outlook.com> (https://github.com/phphe)\n * Released under the MIT License.\n */\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return _get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\n// resolve global\nvar glb;\n\ntry {\n  glb = global;\n} catch (e) {\n  glb = window;\n} // local store\n\n\nvar store = {}; // is 各种判断\n\nfunction isset(v) {\n  return typeof v !== 'undefined';\n}\nfunction isArray(v) {\n  return Object.prototype.toString.call(v) === '[object Array]';\n}\nfunction isBool(v) {\n  return Object.prototype.toString.call(v) === '[object Boolean]';\n}\nfunction isNumber(v) {\n  return Object.prototype.toString.call(v) === '[object Number]';\n}\nfunction isNumeric(v) {\n  return isFinite(v);\n}\nfunction isString(v) {\n  return Object.prototype.toString.call(v) === '[object String]';\n}\nfunction isObject(v) {\n  return Object.prototype.toString.call(v) === '[object Object]';\n}\nfunction isFunction(v) {\n  return typeof v === 'function';\n}\nfunction isPromise(v) {\n  return Object.prototype.toString.call(v) === '[object Promise]';\n}\nfunction empty(v) {\n  if (v == null) {\n    return true;\n  } else if (v.length != null) {\n    return v.length === 0;\n  } else if (isBool(v)) {\n    return false;\n  } else if (isNumber(v)) {\n    return isNaN(v);\n  } else if (isObject(v)) {\n    return Object.keys(v).length === 0;\n  }\n} // num\n\nfunction numRand(min, max) {\n  if (arguments.length === 1) {\n    max = min;\n    min = 0;\n  }\n\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\nfunction numPad(num, n) {\n  var len = num.toString().length;\n\n  while (len < n) {\n    num = '0' + num;\n    len++;\n  }\n\n  return num;\n}\nfunction min(n, min) {\n  return n < min ? min : n;\n}\nfunction max(n, max) {\n  return n < max ? n : max;\n} // str 字符\n\nfunction studlyCase(str) {\n  return str && str[0].toUpperCase() + str.substr(1);\n}\nfunction kebabCase(str) {\n  return str.replace(/ /g, '-').replace(/_/g, '-').replace(/([A-Z])/g, '-$1').replace(/--+/g, '-').replace(/^-|-$|/g, '').toLowerCase();\n}\nfunction snakeCase(str) {\n  return kebabCase(str).replace(/-/g, '_');\n}\nfunction camelCase(str) {\n  var temp = str.toString().split(/[-_]/);\n\n  for (var i = 1; i < temp.length; i++) {\n    temp[i] = studlyCase(temp[i]);\n  }\n\n  return temp.join('');\n}\nfunction camelToWords(str) {\n  return str.toString().trim().split(/(?=[A-Z])/);\n}\nfunction titleCase(str) {\n  return camelToWords(studlyCase(camelCase(str))).join(' ').replace(/\\bid\\b/ig, 'ID');\n}\nfunction strRand() {\n  var len = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var r = '';\n  var seeds = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n  for (var i = 0; i < len; i++) {\n    r += seeds[numRand(seeds.length - 1)];\n  }\n\n  return prefix + r;\n}\nfunction replaceMultiple(mapObj, str) {\n  var reg = new RegExp(Object.keys(mapObj).join('|'), 'g');\n  return str.replace(reg, function (matchedKey) {\n    return mapObj[matchedKey];\n  });\n} // array\n\nfunction arrayRemove(arr, v) {\n  var index;\n  var count = 0;\n\n  while ((index = arr.indexOf(v)) > -1) {\n    arr.splice(index, 1);\n    count++;\n  }\n\n  return count;\n}\nfunction arrayRemoveBySortedIndexes(arr, sortedIndexes) {\n  for (var i = sortedIndexes.length - 1; i >= 0; i--) {\n    var index = sortedIndexes[i];\n    arr.splice(index, 1);\n  }\n}\nfunction newArrayRemoveAt(arr, indexes) {\n  indexes = toArrayIfNot(indexes);\n  var mapping = {};\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = indexes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var index = _step.value;\n      mapping[index] = true;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var newArr = [];\n  var len = arr.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!mapping[i]) {\n      newArr.push(arr[i]);\n    }\n  }\n\n  return newArr;\n}\nfunction arrayAt(arr, n) {\n  return arr[n >= 0 ? n : arr.length + n];\n}\nfunction arrayFirst(arr) {\n  return arr[0];\n}\nfunction arrayLast(arr) {\n  return arr[arr.length - 1];\n}\nfunction arrayDiff(arr1, arr2) {\n  var len = arr1.length;\n  var arr = [];\n\n  while (len--) {\n    if (arr2.indexOf(arr1[len]) < 0) {\n      arr.push(arr1[len]);\n    }\n  }\n\n  return arr;\n} // offset can be many\n\nfunction arraySibling(arr, item, offset) {\n  var index = arr.indexOf(item);\n\n  if (index === -1) {\n    throw 'item is not in array';\n  }\n\n  if (isArray(offset)) {\n    return offset.map(function (v) {\n      return arr[index + v];\n    });\n  }\n\n  return arr[index + offset];\n}\nfunction toArrayIfNot(arrOrNot) {\n  return isArray(arrOrNot) ? arrOrNot : [arrOrNot];\n} // n can be getter(number of times)\n// n可以是方法, 参数1是第几次分块\n\nfunction splitArray(arr, n) {\n  var r = [];\n\n  if (isFunction(n)) {\n    var getChunkLength = n;\n    var times = 1;\n    var i = 0;\n\n    while (i < arr.length) {\n      var _n = getChunkLength(times);\n\n      var end = i + _n;\n      r.push(arr.slice(i, end));\n      i = end;\n      times++;\n    }\n  } else {\n    var _i = 0;\n\n    while (_i < arr.length) {\n      var _end = _i + n;\n\n      r.push(arr.slice(_i, _end));\n      _i = _end;\n    }\n  }\n\n  return r;\n}\nfunction groupArray(arr, getMark) {\n  var groups = new Map();\n  arr.forEach(function (v) {\n    var mark = getMark(v);\n\n    if (!groups.has(mark)) {\n      groups.set(mark, []);\n    }\n\n    groups.get(mark).push(v);\n  });\n  var r = [];\n  groups.forEach(function (value, key) {\n    r.push([key, value]);\n  });\n  return r;\n}\nfunction arrayDistinct(arr) {\n  if (glb.Set) {\n    return _toConsumableArray(new Set(arr));\n  } else {\n    return arr.filter(function (v, i, a) {\n      return a.indexOf(v) === i;\n    });\n  }\n} // object\n\nfunction assignIfDifferent(obj, key, val) {\n  if (obj[key] !== val) {\n    obj[key] = val;\n  }\n}\nfunction objectMerge(o1, o2) {\n  for (var k in o2) {\n    if (!o1.hasOwnProperty(k)) {\n      o1[k] = o2[k];\n    } else if (isObject(o1[k]) && isObject(o2[k])) {\n      Object.assign(o1[k], o2[k]);\n    } else {\n      o1[k] = o2[k];\n    }\n  }\n\n  return o1;\n}\nfunction objectMap(obj, func) {\n  var r = {};\n\n  for (var key in obj) {\n    r[key] = func(obj[key], key, obj);\n  }\n\n  return r;\n}\nfunction objectOnly(obj, keys) {\n  var r = {};\n\n  for (var key in obj) {\n    if (keys.indexOf(key) > -1) {\n      r[key] = obj[key];\n    }\n  }\n\n  return r;\n}\nfunction objectExcept(obj, keys) {\n  var r = {};\n\n  for (var key in obj) {\n    if (keys.indexOf(key) === -1) {\n      r[key] = obj[key];\n    }\n  }\n\n  return r;\n} // loop for all type\n\nfunction forAll(val, handler, reverse) {\n  if (!reverse) {\n    if (isArray(val) || isString(val)) {\n      for (var i = 0; i < val.length; i++) {\n        if (handler(val[i], i) === false) {\n          break;\n        }\n      }\n    } else if (isObject(val)) {\n      var _arr = Object.keys(val);\n\n      for (var _i2 = 0; _i2 < _arr.length; _i2++) {\n        var key = _arr[_i2];\n\n        if (handler(val[key], key) === false) {\n          break;\n        }\n      }\n    } else if (Number.isInteger(val)) {\n      for (var _i3 = 0; _i3 < val; _i3++) {\n        if (handler(_i3, _i3) === false) {\n          break;\n        }\n      }\n    }\n  } else {\n    if (isArray(val) || isString(val)) {\n      for (var _i4 = val.length - 1; _i4 >= 0; _i4--) {\n        if (handler(val[_i4], _i4) === false) {\n          break;\n        }\n      }\n    } else if (isObject(val)) {\n      var keys = Object.keys(val);\n      keys.reverse();\n\n      for (var _i5 = 0; _i5 < keys.length; _i5++) {\n        var _key = keys[_i5];\n\n        if (handler(val[_key], _key) === false) {\n          break;\n        }\n      }\n    } else if (Number.isInteger(val)) {\n      for (var _i6 = val - 1; _i6 >= 0; _i6--) {\n        if (handler(_i6, _i6) === false) {\n          break;\n        }\n      }\n    }\n  }\n} // source: http://stackoverflow.com/questions/8817394/javascript-get-deep-value-from-object-by-passing-path-to-it-as-string\n\nfunction objectGet(obj, path, throwError) {\n  var paths = isArray(path) ? path : path.split('.');\n  var current = obj;\n\n  try {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = paths[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var key = _step2.value;\n        current = current[key];\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  } catch (e) {\n    if (throwError) {\n      throw \"Path does not exist\";\n    }\n  }\n\n  return current;\n}\nfunction objectSet(obj, path, value) {\n  var paths = isArray(path) ? path : path.split('.');\n  var lastKey = arrayLast(paths);\n  var parent = objectGet(obj, paths.slice(0, paths.length - 1));\n\n  if (!parent) {\n    throw \"Path does not exist\";\n  }\n\n  parent[lastKey] = value;\n}\nfunction unset(obj, prop) {\n  obj[prop] = undefined;\n\n  try {\n    delete obj[prop];\n  } catch (e) {}\n} // exclude: array or function\n\nfunction cloneObj(obj, exclude) {\n  var type = _typeof(obj);\n\n  switch (type) {\n    case 'undefined':\n    case 'boolean':\n    case 'nuber':\n    case 'string':\n    case 'function':\n      return obj;\n      break;\n\n    case 'object':\n      if (obj === null) {\n        // null is object\n        return obj;\n      }\n\n      var r;\n\n      if (isArray(obj)) {\n        r = [];\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = obj[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var item = _step3.value;\n            r.push(cloneObj(item, exclude));\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      } else {\n        r = {};\n\n        var _arr2 = Object.keys(obj);\n\n        for (var _i7 = 0; _i7 < _arr2.length; _i7++) {\n          var key = _arr2[_i7];\n\n          if (!exclude || isArray(exclude) && !exclude.includes(key) || !exclude(key, obj[key], obj)) {\n            r[key] = cloneObj(obj[key], exclude);\n          }\n        }\n      }\n\n      return r;\n      break;\n\n    default:\n      return obj;\n      break;\n  }\n} // return cloned obj\n// handler(value, key, parent)\n// handler can return follow:\n//  null: don't change anything\n//  {key: false}: delete\n//  {value}: change value\n//  {key, value}. change key and value\n// limit: to prevent circular reference.\n\nfunction mapObjectTree(obj, handler) {\n  var limit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10000;\n  var r;\n  var count = 0;\n  var stack = [{\n    value: obj\n  }];\n\n  var _loop = function _loop() {\n    if (count >= limit) {\n      throw \"mapObjectTree: limit(\".concat(limit, \") reached, object may has circular reference\");\n    }\n\n    count++;\n\n    var _stack$shift = stack.shift(),\n        value = _stack$shift.value,\n        key = _stack$shift.key,\n        parent = _stack$shift.parent,\n        newParent = _stack$shift.newParent;\n\n    var t = handler(value, key, parent);\n\n    var assign = function assign(value, key, canPush) {\n      if (isArray(value)) {\n        value = [];\n      } else if (isObject(value)) {\n        value = {};\n      }\n\n      if (parent) {\n        if (isArray(newParent) && canPush) {\n          newParent.push(value);\n        } else {\n          newParent[key] = value;\n        }\n      } else {\n        r = value;\n      } // value may changed\n\n\n      return value;\n    };\n\n    var newVal = void 0,\n        val = void 0;\n\n    if (!t) {\n      // no change\n      val = value;\n      newVal = assign(value, key);\n    } else {\n      var key2 = t.key,\n          _value = t.value;\n      val = _value;\n\n      if (key2 === false) {\n        // del\n        return \"continue\";\n      } else if (key2 == null) {\n        // don't change key\n        newVal = assign(_value, key, true);\n      } else {\n        newVal = assign(_value, key2);\n      }\n    }\n\n    if (isArray(val)) {\n      var len = val.length;\n\n      for (var i = 0; i < len; i++) {\n        stack.push({\n          value: val[i],\n          key: i,\n          parent: val,\n          newParent: newVal\n        });\n      }\n    } else if (isObject(val)) {\n      Object.keys(val).forEach(function (key) {\n        stack.push({\n          value: val[key],\n          key: key,\n          parent: val,\n          newParent: newVal\n        });\n      });\n    }\n  };\n\n  while (stack.length > 0) {\n    var _ret = _loop();\n\n    if (_ret === \"continue\") continue;\n  }\n\n  return r;\n} // arr, idKey/getId\n\nfunction mapObjects(arr, idKey) {\n  var r = {};\n  var len = arr.length;\n\n  for (var i = 0; i < len; i++) {\n    var item = arr[i];\n    var id = isFunction(idKey) ? idKey(item, i) : item[idKey];\n    r[id] = item;\n  }\n\n  return r;\n} //\n\nfunction pairRows(rows1, rows2, key1, key2) {\n  if (!key2) {\n    key2 = key1;\n  }\n\n  var map = mapObjects(rows2, key2);\n  return rows1.map(function (row1) {\n    return [row1, map[row1[key1]]];\n  });\n} // function\n\nfunction executeWithCount(func, context) {\n  var count = 0;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args.unshift(count++);\n    return func.apply(context, args);\n  };\n}\nfunction watchChange(getVal, handler) {\n  var oldVal;\n\n  var update = function update() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var newVal = getVal.apply(void 0, args);\n\n    if (oldVal !== newVal) {\n      handler.apply(void 0, [newVal].concat(args));\n    }\n\n    oldVal = newVal;\n  };\n\n  return update;\n} // promise\n// execute promise in sequence\n\nfunction executePromiseGetters(getters) {\n  var concurrent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var stopped;\n  var promise = new Promise(function (resolve, reject) {\n    var r = [];\n    var chunks = splitArray(getters, concurrent);\n    var promise = Promise.resolve();\n    chunks.forEach(function (chunk) {\n      promise = promise.then(function (result) {\n        if (result) {\n          r.push.apply(r, _toConsumableArray(result));\n        }\n\n        if (stopped) {\n          reject('stopped');\n        } else {\n          return Promise.all(chunk.map(function (v) {\n            return v();\n          }));\n        }\n      });\n    });\n    promise.then(function (result) {\n      r.push.apply(r, _toConsumableArray(result));\n      resolve(r);\n    });\n  });\n  return {\n    promise: promise,\n    destroy: function destroy() {\n      stopped = true;\n    }\n  };\n} // url\n\n/* eslint-disable */\n\nfunction getUrlParam(par) {\n  // 获取当前URL\n  var local_url = document.location.href; // 获取要取得的get参数位置\n\n  var get$$1 = local_url.indexOf(par + '=');\n\n  if (get$$1 == -1) {\n    return false;\n  } // 截取字符串\n\n\n  var get_par = local_url.slice(par.length + get$$1 + 1); // 判断截取后的字符串是否还有其他get参数\n\n  var nextPar = get_par.indexOf('&');\n\n  if (nextPar != -1) {\n    get_par = get_par.slice(0, nextPar);\n  }\n\n  return get_par;\n}\n/* eslint-enable */\n// dom\n\nfunction uniqueId() {\n  var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'id_';\n  var id = prefix + strRand();\n  if (!store.uniqueId) store.uniqueId = {};\n  var generatedIds = store.uniqueId;\n\n  if (document.getElementById(id) || generatedIds[id]) {\n    return uniqueId(prefix);\n  } else {\n    generatedIds[id] = true;\n    return id;\n  }\n}\nfunction isDescendantOf(el, parent) {\n  while (true) {\n    if (el.parentElement == null) {\n      return false;\n    } else if (el.parentElement === parent) {\n      return true;\n    } else {\n      el = el.parentElement;\n    }\n  }\n} // refer: https://stackoverflow.com/questions/871399/cross-browser-method-for-detecting-the-scrolltop-of-the-browser-window\n\nfunction getScroll() {\n  if (typeof pageYOffset != 'undefined') {\n    //most browsers except IE before #9\n    return {\n      top: pageYOffset,\n      left: pageXOffset\n    };\n  } else {\n    var B = document.body; //IE 'quirks'\n\n    var D = document.documentElement; //IE with doctype\n\n    D = D.clientHeight ? D : B;\n    return {\n      top: D.scrollTop,\n      left: D.scrollLeft\n    };\n  }\n} // refer: https://gist.github.com/aderaaij/89547e34617b95ac29d1\n\nfunction getOffset(el) {\n  var rect = el.getBoundingClientRect();\n  var scroll = getScroll();\n  return {\n    x: rect.left + scroll.left,\n    y: rect.top + scroll.top\n  };\n}\nfunction offsetToPosition(el, of) {\n  var offsetParent = el.offsetParent;\n\n  if (!offsetParent || offsetParent === document.body && getComputedStyle(document.body).position === 'static') {\n    offsetParent = document.body.parentElement;\n  }\n\n  var ps = {\n    x: el.offsetLeft,\n    y: el.offsetTop\n  };\n  var parent = el;\n\n  while (true) {\n    parent = parent.parentElement;\n\n    if (parent === offsetParent || !parent) {\n      break;\n    }\n\n    ps.x -= parent.scrollLeft;\n    ps.y -= parent.scrollTop;\n  }\n\n  return ps;\n}\nfunction findParent(el, callback) {\n  return doFindParent(el, callback);\n\n  function doFindParent(el, callback) {\n    if (el.parentElement) {\n      if (callback(el.parentElement)) {\n        return el.parentElement;\n      } else {\n        return doFindParent(el.parentElement, callback);\n      }\n    }\n  }\n}\nfunction backupAttr(el, name) {\n  var key = \"original_\".concat(name);\n  el[key] = el.getAttribute(name);\n}\nfunction restoreAttr(el, name) {\n  var key = \"original_\".concat(name);\n  el.setAttribute(name, el[key]);\n} // source: http://youmightnotneedjquery.com/\n\nfunction hasClass(el, className) {\n  if (el.classList) {\n    return el.classList.contains(className);\n  } else {\n    return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n  }\n} // source: http://youmightnotneedjquery.com/\n\nfunction addClass(el, className) {\n  if (!hasClass(el, className)) {\n    if (el.classList) {\n      el.classList.add(className);\n    } else {\n      el.className += ' ' + className;\n    }\n  }\n} // source: http://youmightnotneedjquery.com/\n\nfunction removeClass(el, className) {\n  if (el.classList) {\n    el.classList.remove(className);\n  } else {\n    el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n  }\n}\nfunction getElSize(el) {\n  var originDisplay = el.style.display;\n  el.style.display = 'block';\n  var size = {\n    width: el.offsetWidth,\n    height: el.offsetHeight\n  };\n  el.style.display = originDisplay;\n  return size;\n}\n/**\n * [isOffsetInEl]\n * @param {Number} x\n * @param {Number} y\n * @param {Object} el HTML Element\n */\n\nfunction isOffsetInEl(x, y, el) {\n  var offset = getOffset(el);\n  return offset.x <= x && offset.x + el.offsetWidth >= x && offset.y <= y && offset.y + el.offsetHeight >= y;\n} // get border\n\nfunction getBorder(el) {\n  var body = document.body;\n  var workArea = findParent(el, function (v) {\n    return hasClass(v, 'work-area');\n  });\n  var of = getOffset(workArea);\n  return {\n    left: of.x,\n    right: of.x + workArea.offsetWidth,\n    top: of.y + 50,\n    bottom: body.offsetHeight < glb.innerHeight ? glb.innerHeight : body.offsetHeight\n  };\n}\nfunction setElChildByIndex(el, index, child) {\n  child.childComponentIndex = index;\n  var len = el.childNodes.length;\n\n  if (len === 0) {\n    el.appendChild(child);\n  } else if (index === 0) {\n    el.insertBefore(child, el.childNodes[0]);\n  } else {\n    var _binarySearch = binarySearch(el.childNodes, function (el) {\n      return el.childComponentIndex - index;\n    }, 0, max(index, len - 1), true),\n        nearestIndex = _binarySearch.index,\n        nearest = _binarySearch.value,\n        bigger = _binarySearch.bigger;\n\n    if (bigger) {\n      el.insertBefore(child, nearest);\n    } else {\n      var next = el.childNodes[nearestIndex + 1];\n\n      if (next) {\n        el.insertBefore(child, next);\n      } else {\n        el.appendChild(child);\n      }\n    }\n  }\n} // dom event\n\nfunction onDOM(el, name, handler) {\n  if (el.addEventListener) {\n    // 所有主流浏览器，除了 IE 8 及更早 IE版本\n    el.addEventListener(name, handler);\n  } else if (el.attachEvent) {\n    // IE 8 及更早 IE 版本\n    el.attachEvent(\"on\".concat(name), handler);\n  }\n}\nfunction offDOM(el, name, handler) {\n  if (el.removeEventListener) {\n    // 所有主流浏览器，除了 IE 8 及更早 IE版本\n    el.removeEventListener(name, handler);\n  } else if (el.detachEvent) {\n    // IE 8 及更早 IE 版本\n    el.detachEvent(\"on\".concat(name), handler);\n  }\n} // advance\n// binarySearch 二分查找\n\nfunction binarySearch(arr, callback, start, end, returnNearestIfNoHit) {\n  var max = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1000;\n  var midNum;\n  var mid;\n\n  if (start == null) {\n    start = 0;\n    end = arr.length - 1;\n  }\n\n  var i = 0;\n  var r;\n\n  while (start >= 0 && start <= end) {\n    if (i >= max) {\n      throw Error(\"binarySearch: loop times is over \".concat(max, \", you can increase the limit.\"));\n    }\n\n    midNum = Math.floor((end - start) / 2 + start);\n    mid = arr[midNum];\n    r = callback(mid, i);\n\n    if (r > 0) {\n      end = midNum - 1;\n    } else if (r < 0) {\n      start = midNum + 1;\n    } else {\n      return {\n        index: midNum,\n        value: mid,\n        count: i + 1,\n        hit: true\n      };\n    }\n\n    i++;\n  }\n\n  return returnNearestIfNoHit ? {\n    index: midNum,\n    value: mid,\n    count: i + 1,\n    hit: false,\n    bigger: r > 0\n  } : null;\n} //\n\nfunction windowLoaded() {\n  return new Promise(function (resolve, reject) {\n    if (document && document.readyState === 'complete') {\n      resolve();\n    } else {\n      glb.addEventListener('load', function once() {\n        resolve();\n        glb.removeEventListener('load', once);\n      });\n    }\n  });\n}\nfunction waitTime(milliseconds, callback) {\n  return new Promise(function (resolve, reject) {\n    setTimeout(function () {\n      callback && callback();\n      resolve();\n    }, milliseconds);\n  });\n} // overload waitFor(condition, time = 100, maxCount = 1000))\n\nfunction waitFor(name, condition) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n  var maxCount = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1000;\n\n  if (isFunction(name)) {\n    maxCount = time;\n    time = isNumeric(condition) ? condition : 100;\n    condition = name;\n    name = null;\n  }\n\n  if (!store.waitFor) store.waitFor = {};\n  var waits = store.waitFor;\n\n  if (name && isset(waits[name])) {\n    glb.clearInterval(waits[name]);\n    delete waits[name];\n  }\n\n  return new Promise(function (resolve, reject) {\n    var count = 0;\n\n    function judge(interval) {\n      if (count <= maxCount) {\n        if (condition()) {\n          stop(interval, name);\n          resolve();\n        }\n      } else {\n        stop(interval, name);\n        reject(new Error('waitFor: Limit is reached'));\n      }\n\n      count++;\n    }\n\n    function stop(interval, name) {\n      if (interval) {\n        if (name && isset(waits[name])) {\n          glb.clearInterval(waits[name]);\n          delete waits[name];\n        } else {\n          glb.clearInterval(interval);\n        }\n      }\n    }\n\n    var interval = glb.setInterval(function () {\n      judge(interval);\n    }, time);\n\n    if (name) {\n      waits[name] = interval;\n    }\n\n    judge();\n  });\n}\nfunction retry(func) {\n  var limitTimes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n  if (!store.retry) store.retry = {};\n  var counters = retry;\n  var name = generateName();\n  counters[name] = 0;\n  return doFunc;\n\n  function doFunc(arg1, arg2, arg3) {\n    return func(arg1, arg2, arg3).then(function (data) {\n      delete counters[name];\n      return data;\n    }).catch(function (e) {\n      counters[name]++;\n\n      if (counters[name] >= limitTimes) {\n        delete counters[name];\n        return Promise.reject(e);\n      } else {\n        return doFunc(arg1, arg2, arg3);\n      }\n    });\n  }\n\n  function generateName() {\n    var name = Math.random() + '';\n\n    if (counters[name]) {\n      return generateName();\n    } else {\n      return name;\n    }\n  }\n} // 复制文字到剪贴板\n\nfunction copyTextToClipboard(text) {\n  var textArea = document.createElement('textarea'); //\n  // *** This styling is an extra step which is likely not required. ***\n  //\n  // Why is it here? To ensure:\n  // 1. the element is able to have focus and selection.\n  // 2. if element was to flash render it has minimal visual impact.\n  // 3. less flakyness with selection and copying which **might** occur if\n  //    the textarea element is not visible.\n  //\n  // The likelihood is the element won't even render, not even a flash,\n  // so some of these are just precautions. However in IE the element\n  // is visible whilst the popup box asking the user for permission for\n  // the web page to copy to the clipboard.\n  //\n  // Place in top-left corner of screen regardless of scroll position.\n\n  textArea.style.position = 'fixed';\n  textArea.style.top = 0;\n  textArea.style.left = 0; // Ensure it has a small width and height. Setting to 1px / 1em\n  // doesn't work as this gives a negative w/h on some browsers.\n\n  textArea.style.width = '2em';\n  textArea.style.height = '2em'; // We don't need padding, reducing the size if it does flash render.\n\n  textArea.style.padding = 0; // Clean up any borders.\n\n  textArea.style.border = 'none';\n  textArea.style.outline = 'none';\n  textArea.style.boxShadow = 'none'; // Avoid flash of white box if rendered for any reason.\n\n  textArea.style.background = 'transparent';\n  textArea.value = text;\n  document.body.appendChild(textArea);\n  textArea.select();\n\n  try {\n    var successful = document.execCommand('copy');\n    var msg = successful ? 'successful' : 'unsuccessful';\n    console.log('Copying text command was ' + msg);\n  } catch (err) {\n    console.log('Oops, unable to copy');\n  }\n\n  document.body.removeChild(textArea);\n} // jquery\n\nfunction jqFixedSize(sel) {\n  var $ = glb.jQuery;\n  $(sel).each(function () {\n    var t = $(this);\n    t.css({\n      width: t.width() + 'px',\n      height: t.height() + 'px'\n    });\n  });\n}\nfunction jqMakeCarousel(wrapperSel, listSel, itemSel) {\n  var speed = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1000;\n  var space = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 16;\n  var dir = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 'left';\n  var top = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n\n  if (space.toString().match(/^\\d+$/)) {\n    space = space + 'px';\n  }\n\n  var spaceNumber = parseFloat(space);\n  var $ = glb.jQuery;\n  var wrapper = $(wrapperSel);\n  var list = wrapper.find(listSel);\n  wrapper.css({\n    position: 'relative',\n    height: wrapper.height() + 'px'\n  });\n  var items0 = list.find(itemSel);\n  items0.css({\n    margin: '0',\n    marginRight: space\n  });\n  var width = (Math.ceil(items0.width()) + spaceNumber) * items0.length;\n  list.css({\n    position: 'absolute',\n    margin: '0',\n    width: width + 'px'\n  });\n  var height = list.height();\n  var list2 = list.clone();\n  var list3 = list.clone();\n  list.css({\n    left: 0\n  });\n  list2.css({\n    left: width + 'px'\n  });\n  list3.css({\n    left: width * 2 + 'px'\n  });\n  var lists = $('<div></div>');\n  lists.css({\n    position: 'absolute',\n    width: width * 3 + 'px',\n    height: height + 'px',\n    left: 0,\n    top: top\n  });\n  lists.append(list).append(list2).append(list3);\n  wrapper.append(lists);\n  var left = 0;\n\n  function animateLoop() {\n    if (dir === 'left') {\n      left -= 100;\n    } else {\n      left += 100;\n    }\n\n    lists.animate({\n      left: \"\".concat(left, \"px\")\n    }, speed, 'linear', function () {\n      if (Math.abs(left) > width) {\n        if (dir === 'left') {\n          left += width;\n        } else {\n          left -= width;\n        }\n\n        lists.css({\n          left: left + 'px'\n        });\n      }\n\n      animateLoop();\n    });\n  }\n\n  animateLoop();\n} // https://developer.mozilla.org/docs/Web/API/Window/open\n// http://www.w3school.com.cn/htmldom/met_win_open.asp#windowfeatures\n\nfunction openWindow(url, name) {\n  var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  glb.open(url, name, Object.keys(opt).map(function (k) {\n    return \"\".concat(k, \"=\").concat(opt[k]);\n  }).join(','));\n}\nfunction openCenterWindow(url, name, width, height) {\n  var opt = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var t = {\n    width: width,\n    height: height,\n    top: (glb.screen.availHeight - 30 - height) / 2,\n    left: (glb.screen.availWidth - 30 - width) / 2\n  };\n  Object.assign(t, opt);\n  openWindow(url, name, t);\n}\nvar URLHelper =\n/*#__PURE__*/\nfunction () {\n  // protocol, hostname, port, pastname\n  function URLHelper(baseUrl) {\n    var _this = this;\n\n    _classCallCheck(this, URLHelper);\n\n    Object.defineProperty(this, \"baseUrl\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: ''\n    });\n    Object.defineProperty(this, \"search\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: {}\n    });\n    var t = decodeURI(baseUrl).split('?');\n    this.baseUrl = t[0];\n\n    if (t[1]) {\n      t[1].split('&').forEach(function (v) {\n        var t2 = v.split('=');\n        _this.search[t2[0]] = t2[1] == null ? '' : decodeURIComponent(t2[1]);\n      });\n    }\n  }\n\n  _createClass(URLHelper, [{\n    key: \"getHref\",\n    value: function getHref() {\n      var _this2 = this;\n\n      var t = [this.baseUrl];\n      var searchStr = Object.keys(this.search).map(function (k) {\n        return \"\".concat(k, \"=\").concat(encodeURIComponent(_this2.search[k]));\n      }).join('&');\n\n      if (searchStr) {\n        t.push(searchStr);\n      }\n\n      return t.join('?');\n    }\n  }]);\n\n  return URLHelper;\n}(); // 解析函数参数, 帮助重载\n// types eg: ['Object', (i) => i > 3, ['Number', default], null ]\n// null represent all types of argument\n\nfunction resolveArgsByType(args, types) {\n  var argIndex = 0;\n  return types.map(function (v) {\n    // make rule\n    var rule, dft;\n\n    if (isArray(v)) {\n      rule = v[0];\n      dft = v[1];\n    } else {\n      rule = v;\n      dft = undefined;\n    }\n\n    if (!isFunction(rule)) {\n      if (rule == null) {\n        rule = function rule() {\n          return true;\n        };\n      } else {\n        var t = rule;\n\n        rule = function rule(x) {\n          return Object.prototype.toString.call(x) === \"[object \".concat(t, \"]\");\n        };\n      }\n    }\n\n    var arg = args[argIndex];\n\n    if (rule(arg)) {\n      argIndex++;\n      return arg;\n    } else {\n      return dft;\n    }\n  });\n} // set null can remove a item\n\nfunction makeStorageHelper(storage) {\n  return {\n    storage: storage,\n    set: function set(name, value, minutes) {\n      if (value == null) {\n        this.storage.removeItem(name);\n      } else {\n        this.storage.setItem(name, JSON.stringify({\n          value: value,\n          expired_at: minutes && new Date().getTime() / 1000 + minutes * 60\n        }));\n      }\n    },\n    get: function get$$1(name) {\n      var t = this.storage.getItem(name);\n\n      if (t) {\n        t = JSON.parse(t);\n\n        if (!t.expired_at || t.expired_at > new Date().getTime()) {\n          return t.value;\n        } else {\n          this.storage.removeItem(name);\n        }\n      }\n\n      return null;\n    },\n    clear: function clear() {\n      this.storage.clear();\n    }\n  };\n}\nvar localStorage2 = makeStorageHelper(glb.localStorage);\nvar sessionStorage2 = makeStorageHelper(glb.sessionStorage); // 事件处理\n\nvar EventProcessor =\n/*#__PURE__*/\nfunction () {\n  function EventProcessor() {\n    _classCallCheck(this, EventProcessor);\n\n    Object.defineProperty(this, \"eventStore\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: []\n    });\n  }\n\n  _createClass(EventProcessor, [{\n    key: \"on\",\n    value: function on(name, handler) {\n      this.eventStore.push({\n        name: name,\n        handler: handler\n      });\n    }\n  }, {\n    key: \"once\",\n    value: function once(name, handler) {\n      var _this3 = this;\n\n      var off = function off() {\n        _this3.off(name, wrappedHandler);\n      };\n\n      var wrappedHandler = function wrappedHandler() {\n        handler();\n        off();\n      };\n\n      this.on(name, wrappedHandler);\n      return off;\n    }\n  }, {\n    key: \"off\",\n    value: function off(name, handler) {\n      var indexes = []; // to remove indexes; reverse; 倒序的\n\n      var len = this.eventStore.length;\n\n      for (var i = 0; i < len; i++) {\n        var item = this.eventStore[i];\n\n        if (item.name === name && item.handler === handler) {\n          indexes.unshift(i);\n        }\n      }\n\n      for (var _i8 = 0; _i8 < indexes.length; _i8++) {\n        var index = indexes[_i8];\n        this.eventStore.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(name) {\n      // 重要: 先找到要执行的项放在新数组里, 因为执行项会改变事件项存储数组\n      var items = [];\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.eventStore[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var item = _step4.value;\n\n          if (item.name === name) {\n            items.push(item);\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key4 = 1; _key4 < _len3; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n\n      for (var _i9 = 0; _i9 < items.length; _i9++) {\n        var _item = items[_i9];\n\n        _item.handler.apply(_item, args);\n      }\n    }\n  }]);\n\n  return EventProcessor;\n}();\nvar CrossWindow =\n/*#__PURE__*/\nfunction (_EventProcessor) {\n  _inherits(CrossWindow, _EventProcessor);\n\n  function CrossWindow() {\n    var _this4;\n\n    _classCallCheck(this, CrossWindow);\n\n    _this4 = _possibleConstructorReturn(this, (CrossWindow.__proto__ || Object.getPrototypeOf(CrossWindow)).call(this));\n    Object.defineProperty(_assertThisInitialized(_this4), \"storageName\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: '_crossWindow'\n    });\n    var cls = CrossWindow;\n\n    if (!cls._listen) {\n      cls._listen = true;\n      onDOM(window, 'storage', function (ev) {\n        if (ev.key === _this4.storageName) {\n          var _get2;\n\n          var event = JSON.parse(ev.newValue);\n\n          (_get2 = _get(CrossWindow.prototype.__proto__ || Object.getPrototypeOf(CrossWindow.prototype), \"emit\", _assertThisInitialized(_this4))).call.apply(_get2, [_this4, event.name].concat(_toConsumableArray(event.args)));\n        }\n      });\n    }\n\n    return _this4;\n  }\n\n  _createClass(CrossWindow, [{\n    key: \"emit\",\n    value: function emit(name) {\n      var _get3;\n\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key5 = 1; _key5 < _len4; _key5++) {\n        args[_key5 - 1] = arguments[_key5];\n      }\n\n      (_get3 = _get(CrossWindow.prototype.__proto__ || Object.getPrototypeOf(CrossWindow.prototype), \"emit\", this)).call.apply(_get3, [this, name].concat(args));\n\n      glb.localStorage.setItem(this.storageName, JSON.stringify({\n        name: name,\n        args: args,\n        // use random make storage event triggered every time\n        // 加入随机保证触发storage事件\n        random: Math.random()\n      }));\n    }\n  }]);\n\n  return CrossWindow;\n}(EventProcessor);\n\nexport { store, isset, isArray, isBool, isNumber, isNumeric, isString, isObject, isFunction, isPromise, empty, numRand, numPad, min, max, studlyCase, kebabCase, snakeCase, camelCase, camelToWords, titleCase, strRand, replaceMultiple, arrayRemove, arrayRemoveBySortedIndexes, newArrayRemoveAt, arrayAt, arrayFirst, arrayLast, arrayDiff, arraySibling, toArrayIfNot, splitArray, groupArray, arrayDistinct, assignIfDifferent, objectMerge, objectMap, objectOnly, objectExcept, forAll, objectGet, objectSet, unset, cloneObj, mapObjectTree, mapObjects, pairRows, executeWithCount, watchChange, executePromiseGetters, getUrlParam, uniqueId, isDescendantOf, getScroll, getOffset, offsetToPosition, findParent, backupAttr, restoreAttr, hasClass, addClass, removeClass, getElSize, isOffsetInEl, getBorder, setElChildByIndex, onDOM, offDOM, binarySearch, windowLoaded, waitTime, waitFor, retry, copyTextToClipboard, jqFixedSize, jqMakeCarousel, openWindow, openCenterWindow, URLHelper, resolveArgsByType, makeStorageHelper, localStorage2, sessionStorage2, EventProcessor, CrossWindow };\n","/*!\n * helper-js v1.1.2\n * (c) 2018-present phphe <phphe@outlook.com> (https://github.com/phphe)\n * Released under the MIT License.\n */\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return _get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\n// resolve global\nvar glb;\n\ntry {\n  glb = global;\n} catch (e) {\n  glb = window;\n} // local store\n\n\nvar store = {}; // is 各种判断\n\nfunction isset(v) {\n  return typeof v !== 'undefined';\n}\nfunction isArray(v) {\n  return Object.prototype.toString.call(v) === '[object Array]';\n}\nfunction isBool(v) {\n  return Object.prototype.toString.call(v) === '[object Boolean]';\n}\nfunction isNumber(v) {\n  return Object.prototype.toString.call(v) === '[object Number]';\n}\nfunction isNumeric(v) {\n  return isFinite(v);\n}\nfunction isString(v) {\n  return Object.prototype.toString.call(v) === '[object String]';\n}\nfunction isObject(v) {\n  return Object.prototype.toString.call(v) === '[object Object]';\n}\nfunction isFunction(v) {\n  return typeof v === 'function';\n}\nfunction isPromise(v) {\n  return Object.prototype.toString.call(v) === '[object Promise]';\n}\nfunction empty(v) {\n  if (v == null) {\n    return true;\n  } else if (v.length != null) {\n    return v.length === 0;\n  } else if (isBool(v)) {\n    return false;\n  } else if (isNumber(v)) {\n    return isNaN(v);\n  } else if (isObject(v)) {\n    return Object.keys(v).length === 0;\n  }\n} // num\n\nfunction numRand(min, max) {\n  if (arguments.length === 1) {\n    max = min;\n    min = 0;\n  }\n\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\nfunction numPad(num, n) {\n  var len = num.toString().length;\n\n  while (len < n) {\n    num = '0' + num;\n    len++;\n  }\n\n  return num;\n}\nfunction min(n, min) {\n  return n < min ? min : n;\n}\nfunction max(n, max) {\n  return n < max ? n : max;\n} // str 字符\n\nfunction studlyCase(str) {\n  return str && str[0].toUpperCase() + str.substr(1);\n}\nfunction kebabCase(str) {\n  return str.replace(/ /g, '-').replace(/_/g, '-').replace(/([A-Z])/g, '-$1').replace(/--+/g, '-').replace(/^-|-$|/g, '').toLowerCase();\n}\nfunction snakeCase(str) {\n  return kebabCase(str).replace(/-/g, '_');\n}\nfunction camelCase(str) {\n  var temp = str.toString().split(/[-_]/);\n\n  for (var i = 1; i < temp.length; i++) {\n    temp[i] = studlyCase(temp[i]);\n  }\n\n  return temp.join('');\n}\nfunction camelToWords(str) {\n  return str.toString().trim().split(/(?=[A-Z])/);\n}\nfunction titleCase(str) {\n  return camelToWords(studlyCase(camelCase(str))).join(' ').replace(/\\bid\\b/ig, 'ID');\n}\nfunction strRand() {\n  var len = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var r = '';\n  var seeds = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n  for (var i = 0; i < len; i++) {\n    r += seeds[numRand(seeds.length - 1)];\n  }\n\n  return prefix + r;\n}\nfunction replaceMultiple(mapObj, str) {\n  var reg = new RegExp(Object.keys(mapObj).join('|'), 'g');\n  return str.replace(reg, function (matchedKey) {\n    return mapObj[matchedKey];\n  });\n} // array\n\nfunction arrayRemove(arr, v) {\n  var index;\n  var count = 0;\n\n  while ((index = arr.indexOf(v)) > -1) {\n    arr.splice(index, 1);\n    count++;\n  }\n\n  return count;\n}\nfunction arrayRemoveBySortedIndexes(arr, sortedIndexes) {\n  for (var i = sortedIndexes.length - 1; i >= 0; i--) {\n    var index = sortedIndexes[i];\n    arr.splice(index, 1);\n  }\n}\nfunction newArrayRemoveAt(arr, indexes) {\n  indexes = toArrayIfNot(indexes);\n  var mapping = {};\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = indexes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var index = _step.value;\n      mapping[index] = true;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var newArr = [];\n  var len = arr.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!mapping[i]) {\n      newArr.push(arr[i]);\n    }\n  }\n\n  return newArr;\n}\nfunction arrayAt(arr, n) {\n  return arr[n >= 0 ? n : arr.length + n];\n}\nfunction arrayFirst(arr) {\n  return arr[0];\n}\nfunction arrayLast(arr) {\n  return arr[arr.length - 1];\n}\nfunction arrayDiff(arr1, arr2) {\n  var len = arr1.length;\n  var arr = [];\n\n  while (len--) {\n    if (arr2.indexOf(arr1[len]) < 0) {\n      arr.push(arr1[len]);\n    }\n  }\n\n  return arr;\n} // offset can be many\n\nfunction arraySibling(arr, item, offset) {\n  var index = arr.indexOf(item);\n\n  if (index === -1) {\n    throw 'item is not in array';\n  }\n\n  if (isArray(offset)) {\n    return offset.map(function (v) {\n      return arr[index + v];\n    });\n  }\n\n  return arr[index + offset];\n}\nfunction toArrayIfNot(arrOrNot) {\n  return isArray(arrOrNot) ? arrOrNot : [arrOrNot];\n} // n can be getter(number of times)\n// n可以是方法, 参数1是第几次分块\n\nfunction splitArray(arr, n) {\n  var r = [];\n\n  if (isFunction(n)) {\n    var getChunkLength = n;\n    var times = 1;\n    var i = 0;\n\n    while (i < arr.length) {\n      var _n = getChunkLength(times);\n\n      var end = i + _n;\n      r.push(arr.slice(i, end));\n      i = end;\n      times++;\n    }\n  } else {\n    var _i = 0;\n\n    while (_i < arr.length) {\n      var _end = _i + n;\n\n      r.push(arr.slice(_i, _end));\n      _i = _end;\n    }\n  }\n\n  return r;\n}\nfunction groupArray(arr, getMark) {\n  var groups = new Map();\n  arr.forEach(function (v) {\n    var mark = getMark(v);\n\n    if (!groups.has(mark)) {\n      groups.set(mark, []);\n    }\n\n    groups.get(mark).push(v);\n  });\n  var r = [];\n  groups.forEach(function (value, key) {\n    r.push([key, value]);\n  });\n  return r;\n}\nfunction arrayDistinct(arr) {\n  if (glb.Set) {\n    return _toConsumableArray(new Set(arr));\n  } else {\n    return arr.filter(function (v, i, a) {\n      return a.indexOf(v) === i;\n    });\n  }\n} // object\n\nfunction assignIfDifferent(obj, key, val) {\n  if (obj[key] !== val) {\n    obj[key] = val;\n  }\n}\nfunction objectMerge(o1, o2) {\n  for (var k in o2) {\n    if (!o1.hasOwnProperty(k)) {\n      o1[k] = o2[k];\n    } else if (isObject(o1[k]) && isObject(o2[k])) {\n      Object.assign(o1[k], o2[k]);\n    } else {\n      o1[k] = o2[k];\n    }\n  }\n\n  return o1;\n}\nfunction objectMap(obj, func) {\n  var r = {};\n\n  for (var key in obj) {\n    r[key] = func(obj[key], key, obj);\n  }\n\n  return r;\n}\nfunction objectOnly(obj, keys) {\n  var r = {};\n\n  for (var key in obj) {\n    if (keys.indexOf(key) > -1) {\n      r[key] = obj[key];\n    }\n  }\n\n  return r;\n}\nfunction objectExcept(obj, keys) {\n  var r = {};\n\n  for (var key in obj) {\n    if (keys.indexOf(key) === -1) {\n      r[key] = obj[key];\n    }\n  }\n\n  return r;\n} // loop for all type\n\nfunction forAll(val, handler, reverse) {\n  if (!reverse) {\n    if (isArray(val) || isString(val)) {\n      for (var i = 0; i < val.length; i++) {\n        if (handler(val[i], i) === false) {\n          break;\n        }\n      }\n    } else if (isObject(val)) {\n      var _arr = Object.keys(val);\n\n      for (var _i2 = 0; _i2 < _arr.length; _i2++) {\n        var key = _arr[_i2];\n\n        if (handler(val[key], key) === false) {\n          break;\n        }\n      }\n    } else if (Number.isInteger(val)) {\n      for (var _i3 = 0; _i3 < val; _i3++) {\n        if (handler(_i3, _i3) === false) {\n          break;\n        }\n      }\n    }\n  } else {\n    if (isArray(val) || isString(val)) {\n      for (var _i4 = val.length - 1; _i4 >= 0; _i4--) {\n        if (handler(val[_i4], _i4) === false) {\n          break;\n        }\n      }\n    } else if (isObject(val)) {\n      var keys = Object.keys(val);\n      keys.reverse();\n\n      for (var _i5 = 0; _i5 < keys.length; _i5++) {\n        var _key = keys[_i5];\n\n        if (handler(val[_key], _key) === false) {\n          break;\n        }\n      }\n    } else if (Number.isInteger(val)) {\n      for (var _i6 = val - 1; _i6 >= 0; _i6--) {\n        if (handler(_i6, _i6) === false) {\n          break;\n        }\n      }\n    }\n  }\n} // source: http://stackoverflow.com/questions/8817394/javascript-get-deep-value-from-object-by-passing-path-to-it-as-string\n\nfunction objectGet(obj, path, throwError) {\n  var paths = isArray(path) ? path : path.split('.');\n  var current = obj;\n\n  try {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = paths[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var key = _step2.value;\n        current = current[key];\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  } catch (e) {\n    if (throwError) {\n      throw \"Path does not exist\";\n    }\n  }\n\n  return current;\n}\nfunction objectSet(obj, path, value) {\n  var paths = isArray(path) ? path : path.split('.');\n  var lastKey = arrayLast(paths);\n  var parent = objectGet(obj, paths.slice(0, paths.length - 1));\n\n  if (!parent) {\n    throw \"Path does not exist\";\n  }\n\n  parent[lastKey] = value;\n}\nfunction unset(obj, prop) {\n  obj[prop] = undefined;\n\n  try {\n    delete obj[prop];\n  } catch (e) {}\n} // exclude: array or function\n\nfunction cloneObj(obj, exclude) {\n  var type = _typeof(obj);\n\n  switch (type) {\n    case 'undefined':\n    case 'boolean':\n    case 'nuber':\n    case 'string':\n    case 'function':\n      return obj;\n      break;\n\n    case 'object':\n      if (obj === null) {\n        // null is object\n        return obj;\n      }\n\n      var r;\n\n      if (isArray(obj)) {\n        r = [];\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = obj[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var item = _step3.value;\n            r.push(cloneObj(item, exclude));\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      } else {\n        r = {};\n\n        var _arr2 = Object.keys(obj);\n\n        for (var _i7 = 0; _i7 < _arr2.length; _i7++) {\n          var key = _arr2[_i7];\n\n          if (!exclude || isArray(exclude) && !exclude.includes(key) || !exclude(key, obj[key], obj)) {\n            r[key] = cloneObj(obj[key], exclude);\n          }\n        }\n      }\n\n      return r;\n      break;\n\n    default:\n      return obj;\n      break;\n  }\n} // return cloned obj\n// handler(value, key, parent)\n// handler can return follow:\n//  null: don't change anything\n//  {key: false}: delete\n//  {value}: change value\n//  {key, value}. change key and value\n// limit: to prevent circular reference.\n\nfunction mapObjectTree(obj, handler) {\n  var limit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10000;\n  var r;\n  var count = 0;\n  var stack = [{\n    value: obj\n  }];\n\n  var _loop = function _loop() {\n    if (count >= limit) {\n      throw \"mapObjectTree: limit(\".concat(limit, \") reached, object may has circular reference\");\n    }\n\n    count++;\n\n    var _stack$shift = stack.shift(),\n        value = _stack$shift.value,\n        key = _stack$shift.key,\n        parent = _stack$shift.parent,\n        newParent = _stack$shift.newParent;\n\n    var t = handler(value, key, parent);\n\n    var assign = function assign(value, key, canPush) {\n      if (isArray(value)) {\n        value = [];\n      } else if (isObject(value)) {\n        value = {};\n      }\n\n      if (parent) {\n        if (isArray(newParent) && canPush) {\n          newParent.push(value);\n        } else {\n          newParent[key] = value;\n        }\n      } else {\n        r = value;\n      } // value may changed\n\n\n      return value;\n    };\n\n    var newVal = void 0,\n        val = void 0;\n\n    if (!t) {\n      // no change\n      val = value;\n      newVal = assign(value, key);\n    } else {\n      var key2 = t.key,\n          _value = t.value;\n      val = _value;\n\n      if (key2 === false) {\n        // del\n        return \"continue\";\n      } else if (key2 == null) {\n        // don't change key\n        newVal = assign(_value, key, true);\n      } else {\n        newVal = assign(_value, key2);\n      }\n    }\n\n    if (isArray(val)) {\n      var len = val.length;\n\n      for (var i = 0; i < len; i++) {\n        stack.push({\n          value: val[i],\n          key: i,\n          parent: val,\n          newParent: newVal\n        });\n      }\n    } else if (isObject(val)) {\n      Object.keys(val).forEach(function (key) {\n        stack.push({\n          value: val[key],\n          key: key,\n          parent: val,\n          newParent: newVal\n        });\n      });\n    }\n  };\n\n  while (stack.length > 0) {\n    var _ret = _loop();\n\n    if (_ret === \"continue\") continue;\n  }\n\n  return r;\n} // arr, idKey/getId\n\nfunction mapObjects(arr, idKey) {\n  var r = {};\n  var len = arr.length;\n\n  for (var i = 0; i < len; i++) {\n    var item = arr[i];\n    var id = isFunction(idKey) ? idKey(item, i) : item[idKey];\n    r[id] = item;\n  }\n\n  return r;\n} //\n\nfunction pairRows(rows1, rows2, key1, key2) {\n  if (!key2) {\n    key2 = key1;\n  }\n\n  var map = mapObjects(rows2, key2);\n  return rows1.map(function (row1) {\n    return [row1, map[row1[key1]]];\n  });\n} // function\n\nfunction executeWithCount(func, context) {\n  var count = 0;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args.unshift(count++);\n    return func.apply(context, args);\n  };\n}\nfunction watchChange(getVal, handler) {\n  var oldVal;\n\n  var update = function update() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var newVal = getVal.apply(void 0, args);\n\n    if (oldVal !== newVal) {\n      handler.apply(void 0, [newVal].concat(args));\n    }\n\n    oldVal = newVal;\n  };\n\n  return update;\n} // promise\n// execute promise in sequence\n\nfunction executePromiseGetters(getters) {\n  var concurrent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var stopped;\n  var promise = new Promise(function (resolve, reject) {\n    var r = [];\n    var chunks = splitArray(getters, concurrent);\n    var promise = Promise.resolve();\n    chunks.forEach(function (chunk) {\n      promise = promise.then(function (result) {\n        if (result) {\n          r.push.apply(r, _toConsumableArray(result));\n        }\n\n        if (stopped) {\n          reject('stopped');\n        } else {\n          return Promise.all(chunk.map(function (v) {\n            return v();\n          }));\n        }\n      });\n    });\n    promise.then(function (result) {\n      r.push.apply(r, _toConsumableArray(result));\n      resolve(r);\n    });\n  });\n  return {\n    promise: promise,\n    destroy: function destroy() {\n      stopped = true;\n    }\n  };\n} // url\n\n/* eslint-disable */\n\nfunction getUrlParam(par) {\n  // 获取当前URL\n  var local_url = document.location.href; // 获取要取得的get参数位置\n\n  var get$$1 = local_url.indexOf(par + '=');\n\n  if (get$$1 == -1) {\n    return false;\n  } // 截取字符串\n\n\n  var get_par = local_url.slice(par.length + get$$1 + 1); // 判断截取后的字符串是否还有其他get参数\n\n  var nextPar = get_par.indexOf('&');\n\n  if (nextPar != -1) {\n    get_par = get_par.slice(0, nextPar);\n  }\n\n  return get_par;\n}\n/* eslint-enable */\n// dom\n\nfunction uniqueId() {\n  var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'id_';\n  var id = prefix + strRand();\n  if (!store.uniqueId) store.uniqueId = {};\n  var generatedIds = store.uniqueId;\n\n  if (document.getElementById(id) || generatedIds[id]) {\n    return uniqueId(prefix);\n  } else {\n    generatedIds[id] = true;\n    return id;\n  }\n}\nfunction isDescendantOf(el, parent) {\n  while (true) {\n    if (el.parentElement == null) {\n      return false;\n    } else if (el.parentElement === parent) {\n      return true;\n    } else {\n      el = el.parentElement;\n    }\n  }\n} // refer: https://stackoverflow.com/questions/871399/cross-browser-method-for-detecting-the-scrolltop-of-the-browser-window\n\nfunction getScroll() {\n  if (typeof pageYOffset != 'undefined') {\n    //most browsers except IE before #9\n    return {\n      top: pageYOffset,\n      left: pageXOffset\n    };\n  } else {\n    var B = document.body; //IE 'quirks'\n\n    var D = document.documentElement; //IE with doctype\n\n    D = D.clientHeight ? D : B;\n    return {\n      top: D.scrollTop,\n      left: D.scrollLeft\n    };\n  }\n} // refer: https://gist.github.com/aderaaij/89547e34617b95ac29d1\n\nfunction getOffset(el) {\n  var rect = el.getBoundingClientRect();\n  var scroll = getScroll();\n  return {\n    x: rect.left + scroll.left,\n    y: rect.top + scroll.top\n  };\n}\nfunction offsetToPosition(el, of) {\n  var p = {\n    x: el.offsetLeft,\n    y: el.offsetTop // position\n\n  };\n  var elOf = getOffset(el);\n  return {\n    x: of.x - (elOf.x - p.x),\n    y: of.y - (elOf.y - p.y)\n  };\n  var offsetParent = el.offsetParent;\n\n  if (!offsetParent || offsetParent === document.body && getComputedStyle(document.body).position === 'static') {\n    offsetParent = document.body.parentElement;\n  }\n\n  var ps = {\n    x: el.offsetLeft,\n    y: el.offsetTop\n  };\n  var parent = el;\n\n  while (true) {\n    parent = parent.parentElement;\n\n    if (parent === offsetParent || !parent) {\n      break;\n    }\n\n    ps.x -= parent.scrollLeft;\n    ps.y -= parent.scrollTop;\n  }\n\n  return ps;\n}\nfunction findParent(el, callback) {\n  return doFindParent(el, callback);\n\n  function doFindParent(el, callback) {\n    if (el.parentElement) {\n      if (callback(el.parentElement)) {\n        return el.parentElement;\n      } else {\n        return doFindParent(el.parentElement, callback);\n      }\n    }\n  }\n}\nfunction backupAttr(el, name) {\n  var key = \"original_\".concat(name);\n  el[key] = el.getAttribute(name);\n}\nfunction restoreAttr(el, name) {\n  var key = \"original_\".concat(name);\n  el.setAttribute(name, el[key]);\n} // source: http://youmightnotneedjquery.com/\n\nfunction hasClass(el, className) {\n  if (el.classList) {\n    return el.classList.contains(className);\n  } else {\n    return new RegExp('(^| )' + className + '( |$)', 'gi').test(el.className);\n  }\n} // source: http://youmightnotneedjquery.com/\n\nfunction addClass(el, className) {\n  if (!hasClass(el, className)) {\n    if (el.classList) {\n      el.classList.add(className);\n    } else {\n      el.className += ' ' + className;\n    }\n  }\n} // source: http://youmightnotneedjquery.com/\n\nfunction removeClass(el, className) {\n  if (el.classList) {\n    el.classList.remove(className);\n  } else {\n    el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n  }\n}\nfunction getElSize(el) {\n  var originDisplay = el.style.display;\n  el.style.display = 'block';\n  var size = {\n    width: el.offsetWidth,\n    height: el.offsetHeight\n  };\n  el.style.display = originDisplay;\n  return size;\n}\n/**\n * [isOffsetInEl]\n * @param {Number} x\n * @param {Number} y\n * @param {Object} el HTML Element\n */\n\nfunction isOffsetInEl(x, y, el) {\n  var offset = getOffset(el);\n  return offset.x <= x && offset.x + el.offsetWidth >= x && offset.y <= y && offset.y + el.offsetHeight >= y;\n} // get border\n\nfunction getBorder(el) {\n  var body = document.body;\n  var workArea = findParent(el, function (v) {\n    return hasClass(v, 'work-area');\n  });\n  var of = getOffset(workArea);\n  return {\n    left: of.x,\n    right: of.x + workArea.offsetWidth,\n    top: of.y + 50,\n    bottom: body.offsetHeight < glb.innerHeight ? glb.innerHeight : body.offsetHeight\n  };\n}\nfunction setElChildByIndex(el, index, child) {\n  child.childComponentIndex = index;\n  var len = el.childNodes.length;\n\n  if (len === 0) {\n    el.appendChild(child);\n  } else if (index === 0) {\n    el.insertBefore(child, el.childNodes[0]);\n  } else {\n    var _binarySearch = binarySearch(el.childNodes, function (el) {\n      return el.childComponentIndex - index;\n    }, 0, max(index, len - 1), true),\n        nearestIndex = _binarySearch.index,\n        nearest = _binarySearch.value,\n        bigger = _binarySearch.bigger;\n\n    if (bigger) {\n      el.insertBefore(child, nearest);\n    } else {\n      var next = el.childNodes[nearestIndex + 1];\n\n      if (next) {\n        el.insertBefore(child, next);\n      } else {\n        el.appendChild(child);\n      }\n    }\n  }\n} // dom event\n\nfunction onDOM(el, name, handler) {\n  if (el.addEventListener) {\n    // 所有主流浏览器，除了 IE 8 及更早 IE版本\n    el.addEventListener(name, handler);\n  } else if (el.attachEvent) {\n    // IE 8 及更早 IE 版本\n    el.attachEvent(\"on\".concat(name), handler);\n  }\n}\nfunction offDOM(el, name, handler) {\n  if (el.removeEventListener) {\n    // 所有主流浏览器，除了 IE 8 及更早 IE版本\n    el.removeEventListener(name, handler);\n  } else if (el.detachEvent) {\n    // IE 8 及更早 IE 版本\n    el.detachEvent(\"on\".concat(name), handler);\n  }\n} // advance\n// binarySearch 二分查找\n\nfunction binarySearch(arr, callback, start, end, returnNearestIfNoHit) {\n  var max = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1000;\n  var midNum;\n  var mid;\n\n  if (start == null) {\n    start = 0;\n    end = arr.length - 1;\n  }\n\n  var i = 0;\n  var r;\n\n  while (start >= 0 && start <= end) {\n    if (i >= max) {\n      throw Error(\"binarySearch: loop times is over \".concat(max, \", you can increase the limit.\"));\n    }\n\n    midNum = Math.floor((end - start) / 2 + start);\n    mid = arr[midNum];\n    r = callback(mid, i);\n\n    if (r > 0) {\n      end = midNum - 1;\n    } else if (r < 0) {\n      start = midNum + 1;\n    } else {\n      return {\n        index: midNum,\n        value: mid,\n        count: i + 1,\n        hit: true\n      };\n    }\n\n    i++;\n  }\n\n  return returnNearestIfNoHit ? {\n    index: midNum,\n    value: mid,\n    count: i + 1,\n    hit: false,\n    bigger: r > 0\n  } : null;\n} //\n\nfunction windowLoaded() {\n  return new Promise(function (resolve, reject) {\n    if (document && document.readyState === 'complete') {\n      resolve();\n    } else {\n      glb.addEventListener('load', function once() {\n        resolve();\n        glb.removeEventListener('load', once);\n      });\n    }\n  });\n}\nfunction waitTime(milliseconds, callback) {\n  return new Promise(function (resolve, reject) {\n    setTimeout(function () {\n      callback && callback();\n      resolve();\n    }, milliseconds);\n  });\n} // overload waitFor(condition, time = 100, maxCount = 1000))\n\nfunction waitFor(name, condition) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n  var maxCount = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1000;\n\n  if (isFunction(name)) {\n    maxCount = time;\n    time = isNumeric(condition) ? condition : 100;\n    condition = name;\n    name = null;\n  }\n\n  if (!store.waitFor) store.waitFor = {};\n  var waits = store.waitFor;\n\n  if (name && isset(waits[name])) {\n    glb.clearInterval(waits[name]);\n    delete waits[name];\n  }\n\n  return new Promise(function (resolve, reject) {\n    var count = 0;\n\n    function judge(interval) {\n      if (count <= maxCount) {\n        if (condition()) {\n          stop(interval, name);\n          resolve();\n        }\n      } else {\n        stop(interval, name);\n        reject(new Error('waitFor: Limit is reached'));\n      }\n\n      count++;\n    }\n\n    function stop(interval, name) {\n      if (interval) {\n        if (name && isset(waits[name])) {\n          glb.clearInterval(waits[name]);\n          delete waits[name];\n        } else {\n          glb.clearInterval(interval);\n        }\n      }\n    }\n\n    var interval = glb.setInterval(function () {\n      judge(interval);\n    }, time);\n\n    if (name) {\n      waits[name] = interval;\n    }\n\n    judge();\n  });\n}\nfunction retry(func) {\n  var limitTimes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n  if (!store.retry) store.retry = {};\n  var counters = retry;\n  var name = generateName();\n  counters[name] = 0;\n  return doFunc;\n\n  function doFunc(arg1, arg2, arg3) {\n    return func(arg1, arg2, arg3).then(function (data) {\n      delete counters[name];\n      return data;\n    }).catch(function (e) {\n      counters[name]++;\n\n      if (counters[name] >= limitTimes) {\n        delete counters[name];\n        return Promise.reject(e);\n      } else {\n        return doFunc(arg1, arg2, arg3);\n      }\n    });\n  }\n\n  function generateName() {\n    var name = Math.random() + '';\n\n    if (counters[name]) {\n      return generateName();\n    } else {\n      return name;\n    }\n  }\n} // 复制文字到剪贴板\n\nfunction copyTextToClipboard(text) {\n  var textArea = document.createElement('textarea'); //\n  // *** This styling is an extra step which is likely not required. ***\n  //\n  // Why is it here? To ensure:\n  // 1. the element is able to have focus and selection.\n  // 2. if element was to flash render it has minimal visual impact.\n  // 3. less flakyness with selection and copying which **might** occur if\n  //    the textarea element is not visible.\n  //\n  // The likelihood is the element won't even render, not even a flash,\n  // so some of these are just precautions. However in IE the element\n  // is visible whilst the popup box asking the user for permission for\n  // the web page to copy to the clipboard.\n  //\n  // Place in top-left corner of screen regardless of scroll position.\n\n  textArea.style.position = 'fixed';\n  textArea.style.top = 0;\n  textArea.style.left = 0; // Ensure it has a small width and height. Setting to 1px / 1em\n  // doesn't work as this gives a negative w/h on some browsers.\n\n  textArea.style.width = '2em';\n  textArea.style.height = '2em'; // We don't need padding, reducing the size if it does flash render.\n\n  textArea.style.padding = 0; // Clean up any borders.\n\n  textArea.style.border = 'none';\n  textArea.style.outline = 'none';\n  textArea.style.boxShadow = 'none'; // Avoid flash of white box if rendered for any reason.\n\n  textArea.style.background = 'transparent';\n  textArea.value = text;\n  document.body.appendChild(textArea);\n  textArea.select();\n\n  try {\n    var successful = document.execCommand('copy');\n    var msg = successful ? 'successful' : 'unsuccessful';\n    console.log('Copying text command was ' + msg);\n  } catch (err) {\n    console.log('Oops, unable to copy');\n  }\n\n  document.body.removeChild(textArea);\n} // jquery\n\nfunction jqFixedSize(sel) {\n  var $ = glb.jQuery;\n  $(sel).each(function () {\n    var t = $(this);\n    t.css({\n      width: t.width() + 'px',\n      height: t.height() + 'px'\n    });\n  });\n}\nfunction jqMakeCarousel(wrapperSel, listSel, itemSel) {\n  var speed = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1000;\n  var space = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 16;\n  var dir = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 'left';\n  var top = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n\n  if (space.toString().match(/^\\d+$/)) {\n    space = space + 'px';\n  }\n\n  var spaceNumber = parseFloat(space);\n  var $ = glb.jQuery;\n  var wrapper = $(wrapperSel);\n  var list = wrapper.find(listSel);\n  wrapper.css({\n    position: 'relative',\n    height: wrapper.height() + 'px'\n  });\n  var items0 = list.find(itemSel);\n  items0.css({\n    margin: '0',\n    marginRight: space\n  });\n  var width = (Math.ceil(items0.width()) + spaceNumber) * items0.length;\n  list.css({\n    position: 'absolute',\n    margin: '0',\n    width: width + 'px'\n  });\n  var height = list.height();\n  var list2 = list.clone();\n  var list3 = list.clone();\n  list.css({\n    left: 0\n  });\n  list2.css({\n    left: width + 'px'\n  });\n  list3.css({\n    left: width * 2 + 'px'\n  });\n  var lists = $('<div></div>');\n  lists.css({\n    position: 'absolute',\n    width: width * 3 + 'px',\n    height: height + 'px',\n    left: 0,\n    top: top\n  });\n  lists.append(list).append(list2).append(list3);\n  wrapper.append(lists);\n  var left = 0;\n\n  function animateLoop() {\n    if (dir === 'left') {\n      left -= 100;\n    } else {\n      left += 100;\n    }\n\n    lists.animate({\n      left: \"\".concat(left, \"px\")\n    }, speed, 'linear', function () {\n      if (Math.abs(left) > width) {\n        if (dir === 'left') {\n          left += width;\n        } else {\n          left -= width;\n        }\n\n        lists.css({\n          left: left + 'px'\n        });\n      }\n\n      animateLoop();\n    });\n  }\n\n  animateLoop();\n} // https://developer.mozilla.org/docs/Web/API/Window/open\n// http://www.w3school.com.cn/htmldom/met_win_open.asp#windowfeatures\n\nfunction openWindow(url, name) {\n  var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  glb.open(url, name, Object.keys(opt).map(function (k) {\n    return \"\".concat(k, \"=\").concat(opt[k]);\n  }).join(','));\n}\nfunction openCenterWindow(url, name, width, height) {\n  var opt = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var t = {\n    width: width,\n    height: height,\n    top: (glb.screen.availHeight - 30 - height) / 2,\n    left: (glb.screen.availWidth - 30 - width) / 2\n  };\n  Object.assign(t, opt);\n  openWindow(url, name, t);\n}\nvar URLHelper =\n/*#__PURE__*/\nfunction () {\n  // protocol, hostname, port, pastname\n  function URLHelper(baseUrl) {\n    var _this = this;\n\n    _classCallCheck(this, URLHelper);\n\n    Object.defineProperty(this, \"baseUrl\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: ''\n    });\n    Object.defineProperty(this, \"search\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: {}\n    });\n    var t = decodeURI(baseUrl).split('?');\n    this.baseUrl = t[0];\n\n    if (t[1]) {\n      t[1].split('&').forEach(function (v) {\n        var t2 = v.split('=');\n        _this.search[t2[0]] = t2[1] == null ? '' : decodeURIComponent(t2[1]);\n      });\n    }\n  }\n\n  _createClass(URLHelper, [{\n    key: \"getHref\",\n    value: function getHref() {\n      var _this2 = this;\n\n      var t = [this.baseUrl];\n      var searchStr = Object.keys(this.search).map(function (k) {\n        return \"\".concat(k, \"=\").concat(encodeURIComponent(_this2.search[k]));\n      }).join('&');\n\n      if (searchStr) {\n        t.push(searchStr);\n      }\n\n      return t.join('?');\n    }\n  }]);\n\n  return URLHelper;\n}(); // 解析函数参数, 帮助重载\n// types eg: ['Object', (i) => i > 3, ['Number', default], null ]\n// null represent all types of argument\n\nfunction resolveArgsByType(args, types) {\n  var argIndex = 0;\n  return types.map(function (v) {\n    // make rule\n    var rule, dft;\n\n    if (isArray(v)) {\n      rule = v[0];\n      dft = v[1];\n    } else {\n      rule = v;\n      dft = undefined;\n    }\n\n    if (!isFunction(rule)) {\n      if (rule == null) {\n        rule = function rule() {\n          return true;\n        };\n      } else {\n        var t = rule;\n\n        rule = function rule(x) {\n          return Object.prototype.toString.call(x) === \"[object \".concat(t, \"]\");\n        };\n      }\n    }\n\n    var arg = args[argIndex];\n\n    if (rule(arg)) {\n      argIndex++;\n      return arg;\n    } else {\n      return dft;\n    }\n  });\n} // set null can remove a item\n\nfunction makeStorageHelper(storage) {\n  return {\n    storage: storage,\n    set: function set(name, value, minutes) {\n      if (value == null) {\n        this.storage.removeItem(name);\n      } else {\n        this.storage.setItem(name, JSON.stringify({\n          value: value,\n          expired_at: minutes && new Date().getTime() / 1000 + minutes * 60\n        }));\n      }\n    },\n    get: function get$$1(name) {\n      var t = this.storage.getItem(name);\n\n      if (t) {\n        t = JSON.parse(t);\n\n        if (!t.expired_at || t.expired_at > new Date().getTime()) {\n          return t.value;\n        } else {\n          this.storage.removeItem(name);\n        }\n      }\n\n      return null;\n    },\n    clear: function clear() {\n      this.storage.clear();\n    }\n  };\n}\nvar localStorage2 = makeStorageHelper(glb.localStorage);\nvar sessionStorage2 = makeStorageHelper(glb.sessionStorage); // 事件处理\n\nvar EventProcessor =\n/*#__PURE__*/\nfunction () {\n  function EventProcessor() {\n    _classCallCheck(this, EventProcessor);\n\n    Object.defineProperty(this, \"eventStore\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: []\n    });\n  }\n\n  _createClass(EventProcessor, [{\n    key: \"on\",\n    value: function on(name, handler) {\n      this.eventStore.push({\n        name: name,\n        handler: handler\n      });\n    }\n  }, {\n    key: \"once\",\n    value: function once(name, handler) {\n      var _this3 = this;\n\n      var off = function off() {\n        _this3.off(name, wrappedHandler);\n      };\n\n      var wrappedHandler = function wrappedHandler() {\n        handler();\n        off();\n      };\n\n      this.on(name, wrappedHandler);\n      return off;\n    }\n  }, {\n    key: \"off\",\n    value: function off(name, handler) {\n      var indexes = []; // to remove indexes; reverse; 倒序的\n\n      var len = this.eventStore.length;\n\n      for (var i = 0; i < len; i++) {\n        var item = this.eventStore[i];\n\n        if (item.name === name && item.handler === handler) {\n          indexes.unshift(i);\n        }\n      }\n\n      for (var _i8 = 0; _i8 < indexes.length; _i8++) {\n        var index = indexes[_i8];\n        this.eventStore.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(name) {\n      // 重要: 先找到要执行的项放在新数组里, 因为执行项会改变事件项存储数组\n      var items = [];\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.eventStore[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var item = _step4.value;\n\n          if (item.name === name) {\n            items.push(item);\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key4 = 1; _key4 < _len3; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n\n      for (var _i9 = 0; _i9 < items.length; _i9++) {\n        var _item = items[_i9];\n\n        _item.handler.apply(_item, args);\n      }\n    }\n  }]);\n\n  return EventProcessor;\n}();\nvar CrossWindow =\n/*#__PURE__*/\nfunction (_EventProcessor) {\n  _inherits(CrossWindow, _EventProcessor);\n\n  function CrossWindow() {\n    var _this4;\n\n    _classCallCheck(this, CrossWindow);\n\n    _this4 = _possibleConstructorReturn(this, (CrossWindow.__proto__ || Object.getPrototypeOf(CrossWindow)).call(this));\n    Object.defineProperty(_assertThisInitialized(_this4), \"storageName\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: '_crossWindow'\n    });\n    var cls = CrossWindow;\n\n    if (!cls._listen) {\n      cls._listen = true;\n      onDOM(window, 'storage', function (ev) {\n        if (ev.key === _this4.storageName) {\n          var _get2;\n\n          var event = JSON.parse(ev.newValue);\n\n          (_get2 = _get(CrossWindow.prototype.__proto__ || Object.getPrototypeOf(CrossWindow.prototype), \"emit\", _assertThisInitialized(_this4))).call.apply(_get2, [_this4, event.name].concat(_toConsumableArray(event.args)));\n        }\n      });\n    }\n\n    return _this4;\n  }\n\n  _createClass(CrossWindow, [{\n    key: \"emit\",\n    value: function emit(name) {\n      var _get3;\n\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key5 = 1; _key5 < _len4; _key5++) {\n        args[_key5 - 1] = arguments[_key5];\n      }\n\n      (_get3 = _get(CrossWindow.prototype.__proto__ || Object.getPrototypeOf(CrossWindow.prototype), \"emit\", this)).call.apply(_get3, [this, name].concat(args));\n\n      glb.localStorage.setItem(this.storageName, JSON.stringify({\n        name: name,\n        args: args,\n        // use random make storage event triggered every time\n        // 加入随机保证触发storage事件\n        random: Math.random()\n      }));\n    }\n  }]);\n\n  return CrossWindow;\n}(EventProcessor);\n\nexport { store, isset, isArray, isBool, isNumber, isNumeric, isString, isObject, isFunction, isPromise, empty, numRand, numPad, min, max, studlyCase, kebabCase, snakeCase, camelCase, camelToWords, titleCase, strRand, replaceMultiple, arrayRemove, arrayRemoveBySortedIndexes, newArrayRemoveAt, arrayAt, arrayFirst, arrayLast, arrayDiff, arraySibling, toArrayIfNot, splitArray, groupArray, arrayDistinct, assignIfDifferent, objectMerge, objectMap, objectOnly, objectExcept, forAll, objectGet, objectSet, unset, cloneObj, mapObjectTree, mapObjects, pairRows, executeWithCount, watchChange, executePromiseGetters, getUrlParam, uniqueId, isDescendantOf, getScroll, getOffset, offsetToPosition, findParent, backupAttr, restoreAttr, hasClass, addClass, removeClass, getElSize, isOffsetInEl, getBorder, setElChildByIndex, onDOM, offDOM, binarySearch, windowLoaded, waitTime, waitFor, retry, copyTextToClipboard, jqFixedSize, jqMakeCarousel, openWindow, openCenterWindow, URLHelper, resolveArgsByType, makeStorageHelper, localStorage2, sessionStorage2, EventProcessor, CrossWindow };\n","/*!\n * tree-helper v1.0.5\n * phphe <phphe@outlook.com> (https://github.com/phphe)\n * https://github.com/phphe/tree-helper.git\n * Released under the MIT License.\n */\n\nimport { arrayRemove, isArray } from 'helper-js';\nimport * as hp from 'helper-js';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction clone(obj) {\n  var childrenKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'children';\n\n  var cloned = void 0;\n  if (isArray(obj)) {\n    cloned = obj.map(function (item) {\n      return clone(item);\n    });\n  } else {\n    cloned = Object.assign({}, obj);\n    if (cloned[childrenKey]) {\n      cloned[childrenKey] = clone(cloned[childrenKey]);\n    }\n  }\n  return cloned;\n}\n\n// 旧版深度优先遍历\n// old Depth-First-Search\nfunction forIn(obj, handler) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'children';\n\n  var rootChildren, rootParent, _func;\n  if (isArray(obj)) {\n    rootChildren = obj;\n    rootParent = null;\n  } else {\n    rootChildren = [obj];\n    rootParent = null;\n  }\n  if (rootChildren) {\n    _func = function func(children, parent) {\n      for (var key in children) {\n        var child = children[key];\n        if (handler(child, key, parent) === false) {\n          return false;\n        }\n        if (child[childrenKey] != null) {\n          if (_func(child[childrenKey], child) === false) {\n            return false;\n          }\n        }\n      }\n      return true;\n    };\n    _func(rootChildren, rootParent);\n  }\n  return obj;\n}\n\n// 深度优先遍历\n// Depth-First-Search\nfunction depthFirstSearch(obj, handler) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'children';\n  var reverse = arguments[3];\n\n  var rootChildren = isArray(obj) ? obj : [obj];\n  //\n  var StopException = function StopException() {};\n  var func = function func(children, parent) {\n    if (reverse) {\n      children = children.slice();\n      children.reverse();\n    }\n    var len = children.length;\n    for (var i = 0; i < len; i++) {\n      var item = children[i];\n      var r = handler(item, i, parent);\n      if (r === false) {\n        // stop\n        throw new StopException();\n      } else if (r === 'skip children') {\n        continue;\n      } else if (r === 'skip siblings') {\n        break;\n      }\n      if (item[childrenKey] != null) {\n        func(item[childrenKey], item);\n      }\n    }\n  };\n  try {\n    func(rootChildren);\n  } catch (e) {\n    if (e instanceof StopException) {\n      // stop\n    } else {\n      throw e;\n    }\n  }\n}\n\n// 广度优先遍历\n// Breadth-First-Search\nfunction breadthFirstSearch(obj, handler) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'children';\n  var reverse = arguments[3];\n\n  var rootChildren = isArray(obj) ? obj : [obj];\n  //\n  var stack = rootChildren.map(function (v, i) {\n    return { item: v, index: i };\n  });\n  if (reverse) {\n    stack.reverse();\n  }\n\n  var _loop = function _loop() {\n    var _stack$shift = stack.shift(),\n        item = _stack$shift.item,\n        index = _stack$shift.index,\n        parent = _stack$shift.parent;\n\n    var r = handler(item, index, parent);\n    if (r === false) {\n      // stop\n      return {\n        v: void 0\n      };\n    } else if (r === 'skip children') {\n      return 'continue';\n    } else if (r === 'skip siblings') {\n      stack = stack.filter(function (v) {\n        return v.parent !== parent;\n      });\n    }\n    if (item.children) {\n      var _stack;\n\n      var children = item.children;\n      if (reverse) {\n        children = children.slice();\n        children.reverse();\n      }\n      var pushStack = children.map(function (v, i) {\n        return { item: v, index: i, parent: item };\n      });\n      (_stack = stack).push.apply(_stack, _toConsumableArray(pushStack));\n    }\n  };\n\n  while (stack.length) {\n    var _ret = _loop();\n\n    switch (_ret) {\n      case 'continue':\n        continue;\n\n      default:\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n    }\n  }\n}\n\nfunction _changeParent(item, parent) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'children';\n  var parentKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'parent';\n\n  // remove item from original list\n  if (item[parentKey]) {\n    arrayRemove(item[parentKey][childrenKey], item);\n  }\n  item[parentKey] = parent;\n}\n\nfunction getTreeDataFromFlat(data, idKey, parentIdKey) {\n  data.forEach(function (item) {\n    return item.children = data.filter(function (v) {\n      return v[parentIdKey] === item[idKey];\n    });\n  });\n  return data.filter(function (item) {\n    return item[parentIdKey] == null;\n  });\n}\nfunction insertBefore(item, target) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'children';\n  var parentKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'parent';\n\n  if (item === target) {\n    return;\n  }\n  var siblings = target[parentKey][childrenKey];\n  var index = siblings.indexOf(target);\n  if (siblings[index - 1] !== item) {\n    if (item[parentKey] === target[parentKey]) {\n      arrayRemove(siblings, item);\n      index = siblings.indexOf(target);\n    } else {\n      _changeParent(item, target[parentKey]);\n    }\n    siblings.splice(index, 0, item);\n  }\n}\nfunction insertAfter(item, target) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'children';\n  var parentKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'parent';\n\n  if (item === target) {\n    return;\n  }\n  var targetParent = target[parentKey];\n  var siblings = targetParent[childrenKey];\n  var index = siblings.indexOf(target);\n  if (siblings[index + 1] !== item) {\n    if (item[parentKey] === target[parentKey]) {\n      arrayRemove(siblings, item);\n      index = siblings.indexOf(target);\n    } else {\n      _changeParent(item, target[parentKey]);\n    }\n    siblings.splice(index + 1, 0, item);\n  }\n}\nfunction prependTo(item, target) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'children';\n  var parentKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'parent';\n\n  if (item === target) {\n    throw 'can\\'t prepend to self';\n  }\n  var targetChildren = target[childrenKey];\n  if (targetChildren[0] !== item) {\n    _changeParent(item, target);\n    targetChildren.splice(0, 0, item);\n  }\n}\nfunction appendTo(item, target) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'children';\n  var parentKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'parent';\n\n  if (item === target) {\n    throw 'can\\'t append to self';\n  }\n  var targetChildren = target[childrenKey];\n  var targetChildrenLast = targetChildren[targetChildren.length - 1];\n  if (targetChildrenLast !== item) {\n    _changeParent(item, target);\n    targetChildren.push(item);\n  }\n}\n\nexport { clone, forIn, depthFirstSearch, breadthFirstSearch, getTreeDataFromFlat, insertBefore, insertAfter, prependTo, appendTo };\n","<template lang=\"pug\">\n.tree-node(\n  :class=\"[data.active ? store.activatedClass : '', data.open ? store.openedClass : '', data.class]\"\n  :id=\"data._id\" :data-level=\"data.level\"\n)\n  .tree-node-inner-back(v-if=\"!isRoot\" :style=\"[innerBackStyle, data.innerBackStyle]\" :class=\"[data.innerBackClass]\")\n    .tree-node-inner(:style=\"[data.innerStyle]\" :class=\"[data.innerClass]\")\n      slot(:data=\"data\" :store=\"store\")\n  .tree-node-children(v-if=\"childrenVisible\")\n    TreeNode(v-for=\"child in data.children\" :key=\"child._id\"\n      :data=\"child\" :store=\"store\"\n    )\n      template(slot-scope=\"props\")\n        slot(:data=\"props.data\" :store=\"props.store\")\n</template>\n<script>\nexport default {\n  name: 'TreeNode',\n  props: {\n    data: {},\n    store: {},\n  },\n  // data() {\n  //   return {\n  //   }\n  // },\n  computed: {\n    isRoot() {return this.data.level === 0},\n    childrenVisible() {\n      const {data} = this\n      return this.isRoot || data.children && data.children.length && data.open\n    },\n    innerBackStyle() {\n      const r = {\n        marginBottom: this.store.space + 'px'\n      }\n      if (!this.isRoot && this.data.level > 1) {\n        const {indentType} = this.store\n        r.paddingLeft = (this.data.level - 1) * this.store.indent + 'px'\n      }\n      return r\n    },\n  },\n  watch: {\n    data: {\n      immediate: true,\n      handler(data) {\n        if (data) {\n          data._vm = this\n          // the level of root is 0, no need to update root level\n          if (!data._treeNodePropertiesCompleted && !data.isRoot) {\n            this.store.compeleteNode(data, this.$parent.data)\n          }\n        }\n      }\n    },\n    'data.parent': {\n      immediate: true,\n      handler(parent, old) {\n        if (parent !== old) {\n          this.store.updateBranchLevel(this.data)\n        }\n      }\n    }\n  },\n  // methods: {},\n  // created() {},\n  // mounted() {},\n}\n</script>\n","<template lang=\"pug\">\n.he-tree.tree\n  TreeNode(:data=\"rootData\" :store=\"store\")\n    template(slot-scope=\"props\")\n      slot(:data=\"props.data\" :store=\"store\")\n</template>\n\n<script>\nimport * as hp from 'helper-js'\nimport * as th from 'tree-helper'\nimport * as ut from '../utils.js'\nimport TreeNode from './TreeNode.vue'\n\nexport default {\n  props: {\n    data: {},\n    idLength: {default: 5},\n    indent: {default: 16},\n    activatedClass: {default: 'active'},\n    openedClass: {default: 'open'},\n    space: {default: 10}, // space between node, unit px\n  },\n  components: {TreeNode},\n  data() {\n    return {\n      store: this,\n      rootData: null,\n    }\n  },\n  // computed: {},\n  watch: {\n    data: {\n      immediate: true,\n      handler(data, old) {\n        if (data === old) {\n          return\n        }\n        // make rootData always use a same object\n        this.rootData = this.rootData || {isRoot: true, _id: `tree_${this._uid}_node_root`, level: 0}\n        th.breadthFirstSearch(data, (node, k, parent) => {\n          this.compeleteNode(node, parent)\n        })\n        this.rootData.children = data\n      }\n    }\n  },\n  methods: {\n    compeleteNode(node, parent) {\n      const compeletedData = {\n        open: true,\n        children: [],\n        active: false,\n        style: {},\n        class: '',\n        innerStyle: {},\n        innerClass: '',\n        innerBackStyle: {},\n        innerBackClass: {},\n      }\n      for (const key in compeletedData) {\n        if (!node.hasOwnProperty(key)) {\n          this.$set(node, key, compeletedData[key])\n        }\n      }\n      this.$set(node, 'parent', parent || this.rootData)\n      this.$set(node, 'level', node.parent.level + 1)\n      if (!node.hasOwnProperty('_id')) {\n        node._id = `tree_${this._uid}_node_${hp.strRand(this.idLength)}`\n      }\n      node._treeNodePropertiesCompleted = true\n    },\n    updateBranchLevel(branch, startLevel = branch.parent.level + 1) {\n      branch.level = startLevel\n      if (branch.children && branch.children.length > 0) {\n        th.breadthFirstSearch(branch.children, (node, i, p) => {\n          node.level = node.parent.level + 1\n        })\n      }\n    },\n    // pure node self\n    pure(node, withChildren) {\n      const t = Object.assign({}, node)\n      delete t._id\n      delete t.parent\n      delete t.children\n      delete t.open\n      delete t.level\n      delete t.active\n      delete t.style\n      delete t.class\n      delete t.innerStyle\n      delete t.innerClass\n      delete t.innerBackStyle\n      delete t.innerBackClass\n      for (const key of Object.keys(t)) {\n        if (key[0] === '_') {\n          delete t[key]\n        }\n      }\n      if (withChildren && node.children) {\n        t.children = node.children.slice()\n        t.children.forEach((v, k) => {\n          t.children[k] = this.pure(v, withChildren)\n        })\n      }\n      return t\n    },\n    getNodeById(id) {\n      let r\n      th.breadthFirstSearch(this.rootData.children, (node) => {\n        if (node._id === id) {\n          r = node\n          return false\n        }\n      })\n      return r\n    },\n    getActivated() {\n      const r = []\n      th.breadthFirstSearch(this.rootData.children, (node) => {\n        if (node.active) {\n          r.push(node)\n        }\n      })\n      return r\n    },\n    getOpened() {\n      const r = []\n      th.breadthFirstSearch(this.rootData.children, (node) => {\n        if (node.open) {\n          r.push(node)\n        }\n      })\n      return r\n    },\n    activeNode(node, inactiveOld) {\n      let {activated} = this\n      if (inactiveOld) {\n        this.getActivated().forEach(node2 => {\n          node2.active = false\n        })\n      }\n      node.active = true\n    },\n    toggleActive(node, inactiveOld) {\n      if (node.active) {\n        node.active = false\n      } else {\n        this.activeNode(node, inactiveOld)\n      }\n    },\n    openNode(node, closeOld) {\n      let {opened} = this\n      if (closeOld) {\n        this.getOpened().forEach(node2 => {\n          node2.open = false\n        })\n      }\n      node.open = true\n    },\n    toggleOpen(node, closeOld) {\n      if (node.open) {\n        node.open = false\n      } else {\n        this.openNode(node, closeOld)\n      }\n    },\n    getPureData() {\n      return this.pure(this.rootData, true).children\n    },\n    deleteNode(node) {\n      return hp.arrayRemove(node.parent.children, node)\n    },\n  },\n  // created() {},\n  // mounted() {},\n}\n</script>\n","/*!\n * drag-event-service v0.0.3\n * (c) 2018-present phphe <phphe@outlook.com> (https://github.com/phphe)\n * Released under the MIT License.\n */\nimport { onDOM, offDOM } from 'helper-js';\n\n// support desktop and mobile\nvar events = {\n  start: ['mousedown', 'touchstart'],\n  move: ['mousemove', 'touchmove'],\n  end: ['mouseup', 'touchend']\n};\nvar index = {\n  canTouch: function canTouch() {\n    return 'ontouchstart' in document.documentElement;\n  },\n  _getStore: function _getStore(el) {\n    if (!el._wrapperStore) {\n      el._wrapperStore = [];\n    }\n\n    return el._wrapperStore;\n  },\n  on: function on(el, name, handler) {\n    var store = this._getStore(el);\n\n    var canTouch = this.canTouch();\n\n    var wrapper = function wrapper(e) {\n      var mouse;\n\n      if (!canTouch) {\n        if (name === 'start' && e.which !== 1) {\n          // not left button\n          return;\n        }\n\n        mouse = {\n          x: e.pageX,\n          y: e.pageY\n        };\n      } else {\n        mouse = {\n          x: e.changedTouches[0].pageX,\n          y: e.changedTouches[0].pageY\n        };\n      }\n\n      return handler.call(this, e, mouse);\n    };\n\n    store.push({\n      handler: handler,\n      wrapper: wrapper\n    });\n    onDOM(el, events[name][canTouch ? 1 : 0], wrapper);\n  },\n  off: function off(el, name, handler) {\n    var store = this._getStore(el);\n\n    var canTouch = this.canTouch();\n    var eventName = events[name][canTouch ? 1 : 0];\n\n    for (var i = store.length - 1; i >= 0; i--) {\n      var _store$i = store[i],\n          handler2 = _store$i.handler,\n          wrapper = _store$i.wrapper;\n\n      if (handler === handler2) {\n        offDOM(el, eventName, wrapper);\n        store.splice(i, 1);\n      }\n    }\n  }\n};\n\nexport default index;\n","/*!\n * draggable-helper v1.0.14\n * (c) 2018-present phphe <phphe@outlook.com> (https://github.com/phphe)\n * Released under the MIT License.\n */\nimport { onDOM, offDOM, getElSize, backupAttr, restoreAttr, getOffset, offsetToPosition, addClass } from 'helper-js';\nimport DragEventService from 'drag-event-service';\n\n/***\nconst destroy = draggableHelper(HTMLElement dragHandlerEl, Object opt = {})\nopt.drag(e, opt, store)\n[Object] opt.style || opt.getStyle(opt) set style of moving el style\n[Boolean] opt.clone\nopt.draggingClass, default dragging\nopt.moving(e, opt, store) return false can prevent moving\nopt.drop(e, opt, store)\nopt.getEl(dragHandlerEl, opt) get the el that will be moved. default is dragHandlerEl\nopt.minTranslate default 10, unit px\nadd other prop into opt, you get opt in callback\nstore{\n  el\n  initialMouse\n  initialPosition\n  mouse\n  move\n  movedCount // start from 0\n}\ne.g.\ndraggable(this.$el, {\n  vm: this,\n  data: this.data,\n  drag: (e, opt, store) => {\n    dplh.style.height = store.el.querySelector('.TreeNodeSelf').offsetHeight + 'px'\n    th.insertAfter(dplh, opt.data)\n  },\n  moving: (e, opt, store) => {\n    hp.arrayRemove(dplh.parent.children, dplh)\n  },\n  drop: (e, opt, store) => {\n    hp.arrayRemove(dplh.parent.children, dplh)\n  },\n})\n***/\n\nfunction index (dragHandlerEl) {\n  var opt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (opt.minTranslate == null) {\n    opt.minTranslate = 10;\n  }\n\n  var store = getPureStore();\n\n  var destroy = function destroy() {\n    DragEventService.off(dragHandlerEl, 'end', dragHandlerEl._draggbleEventHandler);\n    delete dragHandlerEl._draggbleEventHandler;\n  };\n\n  if (dragHandlerEl._draggbleEventHandler) {\n    destroy();\n  }\n\n  dragHandlerEl._draggbleEventHandler = start;\n  DragEventService.on(dragHandlerEl, 'start', dragHandlerEl._draggbleEventHandler);\n  return destroy;\n\n  function start(e, mouse) {\n    e.stopPropagation();\n    onDOM(document.body, 'selectstart', preventSelect);\n    store.mouse = {\n      x: mouse.x,\n      y: mouse.y\n    };\n    store.initialMouse = Object.assign({}, store.mouse);\n    DragEventService.on(document, 'move', moving);\n    DragEventService.on(window, 'end', drop);\n  }\n\n  function drag(e) {\n    var _resolveDragedElAndIn = resolveDragedElAndInitialPosition(),\n        el = _resolveDragedElAndIn.el,\n        position = _resolveDragedElAndIn.position;\n\n    store.el = el;\n    store.initialPosition = Object.assign({}, position);\n    var r = opt.drag && opt.drag(e, opt, store);\n\n    if (r === false) {\n      offDOM(document.body, 'selectstart', preventSelect);\n      return false;\n    } // dom actions\n\n\n    var size = getElSize(el);\n    var style = Object.assign({\n      width: \"\".concat(size.width, \"px\"),\n      height: \"\".concat(size.height, \"px\"),\n      zIndex: 9999,\n      opacity: 0.6,\n      position: 'absolute',\n      left: position.x + 'px',\n      top: position.y + 'px'\n    }, opt.style || opt.getStyle && opt.getStyle(opt) || {});\n    backupAttr(el, 'style');\n\n    for (var key in style) {\n      el.style[key] = style[key];\n    } // add class\n\n\n    backupAttr(el, 'class');\n    addClass(el, opt.draggingClass); //\n\n    var _document = document,\n        body = _document.body;\n    var bodyOldStyle = (body.getAttribute('style') || '').trim();\n\n    if (bodyOldStyle.length && !bodyOldStyle.endsWith(';')) {\n      bodyOldStyle += ';';\n    }\n\n    backupAttr(body, 'style');\n    body.style = bodyOldStyle + 'cursor: move;';\n  }\n\n  function moving(e, mouse) {\n    store.mouse = {\n      x: mouse.x,\n      y: mouse.y\n    };\n    var move = store.move = {\n      x: store.mouse.x - store.initialMouse.x,\n      y: store.mouse.y - store.initialMouse.y\n    };\n\n    if (store.movedCount === 0 && opt.minTranslate) {\n      var x2 = Math.pow(store.move.x, 2);\n      var y2 = Math.pow(store.move.y, 2);\n      var dtc = Math.pow(x2 + y2, 0.5);\n\n      if (dtc < opt.minTranslate) {\n        return;\n      }\n    }\n\n    var canMove = true;\n\n    if (store.movedCount === 0) {\n      if (drag(e) === false) {\n        canMove = false;\n      }\n    }\n\n    if (canMove && opt.moving) {\n      if (opt.moving(e, opt, store) === false) {\n        canMove = false;\n      }\n    }\n\n    if (canMove) {\n      if (!store || !store.el) {\n        return;\n      }\n\n      Object.assign(store.el.style, {\n        left: store.initialPosition.x + move.x + 'px',\n        top: store.initialPosition.y + move.y + 'px'\n      });\n      store.movedCount++;\n    }\n  }\n\n  function drop(e) {\n    DragEventService.off(document, 'move', moving);\n    DragEventService.off(window, 'end', drop); // drag executed if movedCount > 0\n\n    if (store.movedCount > 0) {\n      store.movedCount = 0;\n      var _store = store,\n          el = _store.el;\n\n      if (opt.clone) {\n        el.parentElement.removeChild(el);\n      } else {\n        restoreAttr(el, 'style');\n        restoreAttr(el, 'class');\n      }\n\n      restoreAttr(document.body, 'style');\n      offDOM(document.body, 'selectstart', preventSelect);\n      opt.drop && opt.drop(e, opt, store);\n    }\n\n    store = getPureStore();\n  }\n\n  function resolveDragedElAndInitialPosition() {\n    var el0 = opt.getEl ? opt.getEl(dragHandlerEl, opt) : dragHandlerEl;\n    var el = el0;\n\n    if (opt.clone) {\n      store.triggerEl = el0;\n      el = el0.cloneNode(true);\n      el0.parentElement.appendChild(el);\n    }\n\n    return {\n      position: offsetToPosition(el, getOffset(el0)),\n      el: el\n    };\n  }\n\n  function getPureStore() {\n    return {\n      movedCount: 0\n    };\n  }\n\n  function preventSelect(e) {\n    e.preventDefault();\n  }\n}\n\nexport default index;\n","export default class Cache {\n  store = {};\n  has(name) {\n    return this.store.hasOwnProperty(name)\n  }\n  remember(name, getter) {\n    if (!this.has(name)) {\n      this.store[name] = {\n        value: getter()\n      }\n    }\n    return this.store[name].value\n  }\n  forget(name) {\n    if (name) {\n      if (this.has(name)) {\n        delete this.store[name]\n      }\n    } else {\n      this.store = {}\n    }\n  }\n}\nexport function attachCache(obj, cache, toCache) {\n  for (const key in toCache) {\n    Object.defineProperty(obj, key, {\n      get() {\n        return cache.remember(key, () => toCache[key].call(this))\n      },\n    })\n  }\n}\n","export function isPropTrue(v) {\n  return v || v === ''\n}\n","import * as hp from 'helper-js'\nimport * as th from 'tree-helper'\nimport Cache, {\n  attachCache\n} from '../plugins/Cache'\nimport * as ut from '../plugins/utils'\n\n// actions for drag placeholder\n// 对 drag placeholder进行的操作\nconst targets = {\n  'nothing': info => {},\n  'after': ({\n    dplh,\n    targetNode,\n    currentTree\n  }) => {\n    // after targetNode or closest droppable parent\n    let node = targetNode\n    while (!node.parent._droppable) {\n      node = node.parent\n    }\n    th.insertAfter(dplh, node)\n  },\n  'before': ({\n    dplh,\n    targetNode\n  }) => {\n    th.insertBefore(dplh, targetNode)\n  },\n  'append': ({\n    dplh,\n    targetNode\n  }) => {\n    th.appendTo(dplh, targetNode)\n    targetNode.open = true\n  },\n  'prepend': (info) => {\n    const {\n      dplh,\n      targetNode\n    } = info\n    th.prependTo(dplh, targetNode)\n    targetNode.open = true\n    // prepend may open a closed node which has children\n    if (!targetNode.open) {\n      targetNode.open = true\n      resolveBranchDroppable(info, targetNode)\n    }\n  },\n  'after target parent': ({\n    dplh,\n    targetNode\n  }) => {\n    th.insertAfter(dplh, targetNode.parent)\n  },\n  // append to prev sibling\n  'append prev': ({\n    dplh,\n    targetNode,\n    node,\n    targetPrev\n  }) => {\n    th.appendTo(dplh, targetPrev)\n    targetPrev.open = true\n  },\n  // append to root\n  'append root': ({\n    dplh,\n    targetNode,\n    node,\n    targetPrev\n  }) => {\n    th.appendTo(dplh, targetNode._vm.store.rootData)\n  },\n}\n\nfunction findChild(info, children, handler, reverse) {\n  const len = children.length\n  if (reverse) {\n    for (let i = len - 1; i >= 0; i--) {\n      const item = children[i]\n      // excluding dragging node\n      if (item !== info.node) {\n        if (handler(item, i)) {\n          return item\n        }\n      }\n    }\n  } else {\n    for (let i = 0; i < len; i++) {\n      const item = children[i]\n      // excluding dragging node\n      if (item !== info.node) {\n        if (handler(item, i)) {\n          return item\n        }\n      }\n    }\n  }\n}\nconst rules = {\n  // 另一节点存在\n  'targetNode existed': info => info.targetNode,\n  // 另一节点是拖动占位节点\n  'targetNode is placeholder': info => info.targetNode.isDragPlaceHolder,\n  // 另一节点父级是根节点\n  'targetNode parent is root': info => info.targetNode.parent.isRoot,\n  // 拖动点坐标在任一树中, 同时, 起始树要可拖出, 当前树要可拖入\n  'currentTree existed': info => info.currentTree,\n  // 占位节点存在\n  'placeholder existed': info => info.dplhEl,\n  // 占位节点在当前树中\n  'placeholder in currentTree': info => info.dplhElInCurrentTree,\n  // 占位节点在最上面\n  'placeholder at top': info => info.dplhAtTop,\n  // 另一节点是打开的\n  'targetNode is open': info => info.targetNode.open,\n  // 另一节点是根节点\n  'targetNode is root': info => info.targetNode.isRoot,\n  // 另一节点有子(不包括占位节点)\n  'targetNode has children excluding placeholder': info => findChild(info, info.targetNode.children, v => v !== info.dplh),\n  // 另一节点可放置\n  'targetNode is droppable': info => info.targetNode._droppable,\n  // 另一节点是第一个节点\n  'targetNode is 1st child': info => findChild(info, info.targetNode.parent.children, v => v) === info.targetNode,\n  // 另一节点是最后节点\n  'targetNode is last child': info => findChild(info, info.targetNode.parent.children, v => v, true) === info.targetNode,\n  // 另一节点上一个节点可放置\n  'targetNode prev is droppable': info => info.targetPrev._droppable,\n  // 当前位置在另一节点inner垂直中线上\n  'on targetNode middle': info => info.offset.y <= info.tiMiddleY,\n  // 当前位置在另一节点inner左边\n  'at left': info => info.offset.x < info.tiOffset.x,\n  // 当前位置在另一节点innner indent位置右边\n  'at indent right': info => info.offset.x > info.tiOffset.x + info.currentTree.indent,\n}\n// convert rule output to Boolean\nfor (const key of Object.keys(rules)) {\n  const old = rules[key]\n  rules[key] = (...args) => Boolean(old(...args))\n}\n\nlet prevTree\n// context is vm\nexport default function(draggableHelperInfo) {\n  const trees = this.store.trees\n  const dhStore = draggableHelperInfo.store\n  // make info\n  const info = {\n    event: draggableHelperInfo.event,\n    el: dhStore.el,\n    vm: this,\n    node: this.data,\n    store: this.store,\n    dplh: this.store.dplh,\n    draggableHelperData: {\n      opt: draggableHelperInfo.options,\n      store: dhStore,\n    }\n  }\n  //\n  attachCache(info, new Cache(), {\n    // dragging node coordinate\n    // 拖动中的节点相关坐标\n    nodeInnerEl() {\n      return this.el.querySelector('.tree-node-inner')\n    },\n    offset() {\n      return hp.getOffset(this.nodeInnerEl)\n    }, // left top point\n    offset2() {\n      return {\n        x: this.offset.x + this.nodeInnerEl.offsetWidth,\n        y: this.offset.y + this.nodeInnerEl.offsetHeight\n      }\n    }, // right bottom point\n    // tree\n    currentTree() {\n      const currentTree = trees.find(tree => hp.isOffsetInEl(this.offset.x, this.offset.y, tree.$el))\n      if (currentTree) {\n        const dragStartTree = this.store\n        let treeChanged\n        if (dhStore.movedCount === 0) {\n          prevTree = dragStartTree\n          treeChanged = true\n        }\n        if (prevTree !== currentTree) {\n          if (!ut.isPropTrue(dragStartTree.crossTree) || !ut.isPropTrue(currentTree.crossTree)) {\n            return\n          }\n          prevTree = currentTree\n          treeChanged = true\n        }\n        if (!ut.isPropTrue(currentTree.droppable)) {\n          return\n        }\n        if (treeChanged) {\n          // when move start or drag move into another tree\n          // resolve _droppable\n          resolveBranchDroppable(info, currentTree.rootData)\n        }\n        return currentTree\n      }\n    },\n    currentTreeRootEl() {\n      return document.getElementById(this.currentTree.rootData._id)\n    },\n    currentTreeRootOf4() {\n      return getOf4(this.currentTreeRootEl, this.currentTree.space)\n    },\n    // placeholder\n    dplhEl() {\n      return document.getElementById(this.dplh._id)\n    },\n    dplhElInCurrentTree() {\n      return Boolean(this.currentTree.$el.querySelector(`#${this.dplh._id}`))\n    },\n    dplhOf4() {\n      return getOf4(this.dplhEl, this.currentTree.space)\n    },\n    dplhAtTop() {\n      return Math.abs(dplhOf4.y - this.currentTreeRootOf4.y) < 5\n    },\n    dplhAtBottom() {\n      return Math.abs(dplhOf4.y2 - this.currentTreeRootOf4.y2) < 5\n    },\n    // most related node\n    // 最相关的另一个节点\n    targetNode() {\n      const {\n        currentTree\n      } = this\n      if (!currentTree) {\n        throw 'no currentTree'\n      }\n      //\n      const {\n        x,\n        y\n      } = this.offset\n      let currentNode = currentTree.rootData\n      while (true) {\n        let children = currentNode.children\n        if (!children) {\n          break\n        }\n        if (this.node.parent === currentNode) {\n          // dragging node is in currentNode children, remove it first\n          children = children.slice()\n          children.splice(children.indexOf(this.node), 1)\n        }\n        if (children.length === 0) {\n          break\n        }\n        const t = hp.binarySearch(children, (node) => {\n          const el = document.getElementById(node._id)\n          const ty = hp.getOffset(el).y\n          const ty2 = ty + el.offsetHeight + currentTree.space\n          if (ty2 < y) {\n            return -1\n          } else if (ty <= y) {\n            return 0\n          } else {\n            return 1\n          }\n        }, null, null, true)\n        if (t.hit) {\n          currentNode = t.value\n        } else {\n          if (t.bigger) {\n            currentNode = children[t.index - 1]\n          } else {\n            currentNode = t.value\n          }\n        }\n        if (!currentNode) {\n          currentNode = children[0]\n          break\n        }\n        if (!currentNode) {\n          break\n        }\n        const innerEl = document.getElementById(currentNode._id).querySelector('.tree-node-inner')\n        const of = getOf4(innerEl, currentTree.space)\n        if ( of .y <= y && y <= of .y2) {\n          break\n        }\n      }\n      return currentNode\n    },\n    targetNodeEl() {\n      return document.getElementById(this.targetNode._id)\n    },\n    // targetNodeInnerElOffset\n    tiInnerEl() {\n      return this.targetNodeEl.querySelector('.tree-node-inner')\n    },\n    tiOffset() {\n      return hp.getOffset(this.tiInnerEl)\n    },\n    tiMiddleY() {\n      return this.tiOffset.y + this.tiInnerEl.offsetHeight / 2\n    },\n    //\n    targetPrevEl() {\n      // tree node 之间不要有其他元素, 否则这里会获取到错误的元素\n      let r = this.targetNodeEl.previousSibling\n      if (hp.hasClass(r, 'dragging')) {\n        r = r.previousSibling\n      }\n      return r\n    },\n    targetPrev() {\n      const id = this.targetPrevEl.getAttribute('id')\n      return this.currentTree.getNodeById(id)\n    },\n  })\n  // attachCache end\n\n  // decision start =================================\n  const executedRuleCache = {}\n  // exec rule\n  const exec = (ruleId) => {\n    if (!executedRuleCache.hasOwnProperty(ruleId)) {\n      let r\n      try {\n        r = rules[ruleId](info)\n      } catch (e) {\n        r = e\n        if (process.env.DEVELOPE_SELF) {\n          // only visible when develop its self\n          console.warn(`failed to execute rule '${ruleId}'`, e);\n        }\n      }\n      executedRuleCache[ruleId] = r\n    }\n    return executedRuleCache[ruleId]\n  }\n  if (exec('currentTree existed') === true) {\n    if (exec('placeholder existed') === true) {\n      if (exec('targetNode is placeholder') === false) {\n        if (exec('placeholder in currentTree') === true) {\n          if (exec('targetNode parent is root') === false) {\n            if (exec('targetNode is open') === true) {\n              if (exec('targetNode has children excluding placeholder') === false) {\n                if (exec('targetNode is droppable') === true) {\n                  if (exec('at left') === false) {\n                    if (exec('targetNode is 1st child') === true) {\n                      if (exec('at indent right') === true) {\n                        targets['append'](info)\n                      } else if (exec('at indent right') === false) {\n                        targets['after'](info)\n                      }\n                    } else if (exec('targetNode is 1st child') === false) {\n                      targets['append'](info)\n                    }\n                  } else if (exec('at left') === true) {\n                    targets['after'](info)\n                  }\n                } else if (exec('targetNode is droppable') === false) {\n                  if (exec('targetNode is 1st child') === true) {\n                    targets['nothing'](info)\n                  } else if (exec('targetNode is 1st child') === false) {\n                    if (exec('targetNode is last child') === true) {\n                      if (exec('on targetNode middle') === false) {\n                        targets['append root'](info)\n                      } else if (exec('on targetNode middle') === true) {\n                        targets['nothing'](info)\n                      }\n                    } else if (exec('targetNode is last child') === false) {\n                      targets['nothing'](info)\n                    }\n                  }\n                }\n              } else if (exec('targetNode has children excluding placeholder') === true) {\n                if (exec('targetNode is droppable') === true) {\n                  targets['prepend'](info)\n                } else if (exec('targetNode is droppable') === false) {\n                  if (exec('targetNode prev is droppable') === true) {\n                    targets['after'](info)\n                  } else if (exec('targetNode prev is droppable') === false) {\n                    targets['nothing'](info)\n                  }\n                }\n              }\n            } else if (exec('targetNode is open') === false) {\n              if (exec('targetNode is droppable') === true) {\n                if (exec('at indent right') === false) {\n                  targets['after'](info)\n                } else if (exec('at indent right') === true) {\n                  targets['prepend'](info)\n                }\n              } else if (exec('targetNode is droppable') === false) {\n                targets['after'](info)\n              }\n            }\n          } else if (exec('targetNode parent is root') === true) {\n            if (exec('targetNode is open') === true) {\n              if (exec('targetNode has children excluding placeholder') === false) {\n                if (exec('targetNode is droppable') === true) {\n                  if (exec('targetNode is 1st child') === false) {\n                    if (exec('targetNode prev is droppable') === false) {\n                      targets['append'](info)\n                    } else if (exec('targetNode prev is droppable') === true) {\n                      if (exec('at indent right') === false) {\n                        targets['after'](info)\n                      } else if (exec('at indent right') === true) {\n                        targets['append'](info)\n                      }\n                    }\n                  } else if (exec('targetNode is 1st child') === true) {\n                    if (exec('on targetNode middle') === true) {\n                      targets['before'](info)\n                    } else if (exec('on targetNode middle') === false) {\n                      if (exec('at indent right') === true) {\n                        targets['append'](info)\n                      } else if (exec('at indent right') === false) {\n                        targets['after'](info)\n                      }\n                    }\n                  }\n                } else if (exec('targetNode is droppable') === false) {\n                  if (exec('targetNode is 1st child') === false) {\n                    if (exec('targetNode prev is droppable') === true) {\n                      targets['after'](info)\n                    } else if (exec('targetNode prev is droppable') === false) {\n                      targets['nothing'](info)\n                    }\n                  } else if (exec('targetNode is 1st child') === true) {\n                    targets['nothing'](info)\n                  }\n                }\n              } else if (exec('targetNode has children excluding placeholder') === true) {\n                if (exec('targetNode is droppable') === true) {\n                  if (exec('targetNode is 1st child') === false) {\n                    targets['prepend'](info)\n                  } else if (exec('targetNode is 1st child') === true) {\n                    if (exec('on targetNode middle') === true) {\n                      targets['before'](info)\n                    } else if (exec('on targetNode middle') === false) {\n                      targets['prepend'](info)\n                    }\n                  }\n                } else if (exec('targetNode is droppable') === false) {\n                  targets['nothing'](info)\n                }\n              }\n            } else if (exec('targetNode is open') === false) {\n              if (exec('targetNode is 1st child') === true) {\n                if (exec('on targetNode middle') === false) {\n                  if (exec('at indent right') === false) {\n                    targets['after'](info)\n                  } else if (exec('at indent right') === true) {\n                    targets['prepend'](info)\n                  }\n                } else if (exec('on targetNode middle') === true) {\n                  targets['before'](info)\n                }\n              } else if (exec('targetNode is 1st child') === false) {\n                if (exec('at indent right') === true) {\n                  targets['prepend'](info)\n                } else if (exec('at indent right') === false) {\n                  targets['after'](info)\n                }\n              }\n            }\n          }\n        } else if (exec('placeholder in currentTree') === false) {\n          targets['append'](info)\n        }\n      } else if (exec('targetNode is placeholder') === true) {\n        if (exec('targetNode parent is root') === false) {\n          if (exec('targetNode is 1st child') === true) {\n            if (exec('targetNode is last child') === true) {\n              if (exec('at left') === false) {\n                targets['nothing'](info)\n              } else if (exec('at left') === true) {\n                targets['after target parent'](info)\n              }\n            } else if (exec('targetNode is last child') === false) {\n              targets['nothing'](info)\n            }\n          } else if (exec('targetNode is 1st child') === false) {\n            if (exec('targetNode is last child') === true) {\n              if (exec('targetNode prev is droppable') === true) {\n                if (exec('at left') === true) {\n                  targets['after target parent'](info)\n                } else if (exec('at left') === false) {\n                  if (exec('at indent right') === true) {\n                    targets['append prev'](info)\n                  } else if (exec('at indent right') === false) {\n                    targets['nothing'](info)\n                  }\n                }\n              } else if (exec('targetNode prev is droppable') === false) {\n                if (exec('at left') === false) {\n                  targets['nothing'](info)\n                } else if (exec('at left') === true) {\n                  targets['after target parent'](info)\n                }\n              }\n            } else if (exec('targetNode is last child') === false) {\n              if (exec('targetNode prev is droppable') === true) {\n                if (exec('at left') === true) {\n                  targets['nothing'](info)\n                } else if (exec('at left') === false) {\n                  if (exec('at indent right') === true) {\n                    targets['append prev'](info)\n                  } else if (exec('at indent right') === false) {\n                    targets['nothing'](info)\n                  }\n                }\n              } else if (exec('targetNode prev is droppable') === false) {\n                targets['nothing'](info)\n              }\n            }\n          }\n        } else if (exec('targetNode parent is root') === true) {\n          if (exec('targetNode is 1st child') === false) {\n            if (exec('targetNode is last child') === false) {\n              if (exec('targetNode prev is droppable') === true) {\n                if (exec('at left') === true) {\n                  targets['nothing'](info)\n                } else if (exec('at left') === false) {\n                  if (exec('at indent right') === true) {\n                    targets['append prev'](info)\n                  } else if (exec('at indent right') === false) {\n                    targets['nothing'](info)\n                  }\n                }\n              } else if (exec('targetNode prev is droppable') === false) {\n                targets['nothing'](info)\n              }\n            } else if (exec('targetNode is last child') === true) {\n              targets['nothing'](info)\n            }\n          } else if (exec('targetNode is 1st child') === true) {\n            targets['nothing'](info)\n          }\n        }\n      }\n    } else if (exec('placeholder existed') === false) {\n      targets['nothing'](info)\n    }\n  } else if (exec('currentTree existed') === false) {\n    targets['nothing'](info)\n  }\n  // decision end =================================\n\n  //\n}\n\nfunction getOf4(el, space) {\n  const r = hp.getOffset(el)\n  r.x2 = r.x + el.offsetWidth\n  r.y2 = r.y + el.offsetHeight + space\n  return r\n}\n\n// branch is a node\nfunction resolveBranchDroppable(info, branch) {\n  const isNodeDroppable = (node) => {\n    if (node.hasOwnProperty('droppable')) {\n      return node.droppable\n    } else {\n      return true\n    }\n  }\n  branch._droppable = isNodeDroppable(branch)\n  th.depthFirstSearch(branch, (item, i, parent) => {\n    if (item === branch) {\n      return\n    }\n    if (item.isDragPlaceHolder || item === info.node) {\n      return 'skip children'\n    }\n    item._droppable = isNodeDroppable(item)\n    if (!item.open) {\n      return 'skip children'\n    }\n  })\n}\n","<script>\nimport * as hp from 'helper-js'\nimport * as th from 'tree-helper'\nimport draggableHelper from 'draggable-helper'\nimport TreeNode from './TreeNode.vue'\nimport autoMoveDragPlaceHolder from './autoMoveDragPlaceHolder'\nimport * as ut from '../plugins/utils'\n\nexport default {\n  extends: TreeNode,\n  name: 'TreeNode',\n  mounted() {\n    if (this.isRoot || this.data.isDragPlaceHolder) {\n      return\n    }\n    const {dplh} = this.store\n    this.$watch('store.draggable', (draggable) => {\n      if (ut.isPropTrue(draggable)) {\n        const triggerEl = this.store.getTriggerEl ? this.store.getTriggerEl(this) : this.$el.querySelector('.tree-node-inner')\n        this._draggableDestroy = draggableHelper(triggerEl, {\n          // trigger el\n          getEl: () => this.$el,\n          minTranslate: 10,\n          drag: (e, opt, store) => {\n            // this store is not tree\n            const draggableHelperInfo = {event: e, options: opt, store}\n            if (this.store.ondragstart && this.store.ondragstart(this.data, draggableHelperInfo) === false) {\n              return false\n            }\n            if (!isNodeDraggable(this.data)) {\n              return false\n            }\n            // record start positon\n            const siblings = this.data.parent.children\n            this.startPosition = {siblings, index: siblings.indexOf(this.data)}\n            //\n            dplh.innerStyle.height = store.el.offsetHeight + 'px'\n            th.insertAfter(dplh, this.data)\n            this.data.class += ' dragging'\n            this.store.$emit('drag', this.data)\n            // console.log('drag start');\n          },\n          moving: (e, opt, store) => {\n            const draggableHelperInfo = {event: e, options: opt, store}\n            return autoMoveDragPlaceHolder.call(this, draggableHelperInfo)\n          },\n          drop: (e, opt, store) => {\n            const draggableHelperInfo = {event: e, options: opt, store}\n            if (this.store.ondragend && this.store.ondragend(this.data, draggableHelperInfo) === false) {\n              hp.arrayRemove(dplh.parent.children, dplh)\n              // can't drop, no change\n            } else {\n              const targetTree = dplh._vm.store\n              const crossTree = targetTree !== this.store\n              const oldTree = crossTree ? this.store : null\n              th.insertAfter(this.data, dplh)\n              hp.arrayRemove(dplh.parent.children, dplh)\n              this.data.class = this.data.class.replace(/(^| )dragging( |$)/g, ' ')\n              targetTree.$emit('drop', this.data, targetTree, oldTree)\n              oldTree && oldTree.$emit('drop', this.data, targetTree, oldTree)\n              // emit change event if changed\n              const siblings = this.data.parent.children\n              if (siblings === this.startPosition.siblings && siblings.indexOf(this.data) === this.startPosition.index) {\n                // not moved\n              } else {\n                this.store.$emit('change', this.data, targetTree, oldTree)\n                oldTree && oldTree.$emit('change', this.data, targetTree, oldTree)\n              }\n              this.startPosition = null\n            }\n            // console.log('drag end');\n          },\n        })\n      } else {\n        if (this._draggableDestroy) {\n          this._draggableDestroy()\n          this._draggableDestroy = null\n        }\n      }\n    }, {immediate: true})\n  },\n}\n\nfunction isNodeDraggable(node, nodeVm) {\n  if (node.hasOwnProperty('draggable')) {\n    return node.draggable\n  } else {\n    return true\n  }\n}\n\n</script>\n","<script>\nimport * as hp from 'helper-js'\nimport * as th from 'tree-helper'\nimport DraggableTreeNode from './DraggableTreeNode.vue'\nimport Tree from './Tree.vue'\nimport * as ut from '../plugins/utils'\n\nconst trees = [] // for multiple trees\n// DragPlaceHolder, unique\nconst dplh = {\n  _id: 'draggable_tree_drag_placeHolder',\n  level: null,\n  droppable: false,\n  isDragPlaceHolder: true,\n  class: 'draggable-placeholder',\n  style: {},\n  innerStyle: {},\n  innerClass: 'draggable-placeholder-inner',\n  innerBackStyle: {},\n  innerBackClass: 'draggable-placeholder-inner-back',\n  // children: [],\n}\n\nexport default {\n  extends: Tree,\n  props: {\n    getTriggerEl: {type: Function},\n    draggable: {},\n    droppable: {default: true},\n    crossTree: {},\n    ondragstart: {type: Function},\n    ondragend: {type: Function},\n  },\n  components: {\n    TreeNode: DraggableTreeNode,\n  },\n  data() {\n    return {\n      // DragPlaceHolder\n      dplh,\n      trees,\n    }\n  },\n  // computed: {},\n  // watch: {},\n  // methods: {},\n  created() {\n    trees.push(this)\n  },\n  mounted() {\n  },\n  beforeDestroy() {\n    hp.arrayRemove(trees, this)\n  },\n}\n</script>\n"],"names":["glb","global","e","window","numRand","min","max","arguments","length","Math","floor","random","arrayRemove","arr","v","index","count","indexOf","splice","getOffset","el","rect","getBoundingClientRect","scroll","pageYOffset","top","left","pageXOffset","B","document","body","D","documentElement","clientHeight","scrollTop","scrollLeft","getScroll","x","y","backupAttr","name","concat","getAttribute","restoreAttr","key","setAttribute","hasClass","className","classList","contains","RegExp","test","onDOM","handler","addEventListener","attachEvent","offDOM","removeEventListener","detachEvent","binarySearch","callback","start","end","returnNearestIfNoHit","midNum","mid","undefined","r","i","Error","value","hit","bigger","makeStorageHelper","storage","set","minutes","this","removeItem","setItem","JSON","stringify","expired_at","Date","getTime","get","t","getItem","parse","clear","localStorage","sessionStorage","isArray","Object","prototype","toString","call","_typeof","Symbol","iterator","obj","constructor","breadthFirstSearch","reverse","stack","map","item","_loop","_stack$shift","shift","parent","filter","children","_stack","slice","pushStack","push","apply","Array","arr2","from","_toConsumableArray","_ret","_changeParent","childrenKey","parentKey","insertAfter","target","siblings","appendTo","targetChildren","data","level","isRoot","open","store","space","indentType","paddingLeft","indent","_vm","_treeNodePropertiesCompleted","compeleteNode","$parent","old","updateBranchLevel","rootData","_uid","node","k","compeletedData","hasOwnProperty","$set","_id","len","prefix","seeds","hp","idLength","branch","startLevel","p","withChildren","assign","active","style","class","innerStyle","innerClass","innerBackStyle","innerBackClass","keys","forEach","_this2","pure","id","inactiveOld","activated","getActivated","activeNode","closeOld","opened","getOpened","openNode","events","move","canTouch","_getStore","_wrapperStore","on","wrapper","mouse","changedTouches","pageX","pageY","which","off","eventName","_store$i","handler2","dragHandlerEl","opt","minTranslate","movedCount","destroy","DragEventService","_draggbleEventHandler","stopPropagation","preventSelect","initialMouse","moving","drop","drag","_resolveDragedElAndIn","el0","getEl","clone","triggerEl","cloneNode","parentElement","appendChild","position","of","offsetParent","getComputedStyle","ps","offsetLeft","offsetTop","offsetToPosition","resolveDragedElAndInitialPosition","initialPosition","size","originDisplay","display","width","offsetWidth","height","offsetHeight","getElSize","zIndex","opacity","getStyle","add","addClass","draggingClass","bodyOldStyle","trim","endsWith","x2","pow","y2","canMove","removeChild","preventDefault","Cache","getter","has","isPropTrue","targets","dplh","targetNode","currentTree","_droppable","info","targetPrev","findChild","prevTree","rules","isDragPlaceHolder","dplhEl","dplhElInCurrentTree","dplhAtTop","offset","tiMiddleY","tiOffset","Boolean","draggableHelperInfo","trees","dhStore","event","options","cache","toCache","defineProperty","remember","_this","querySelector","nodeInnerEl","find","tree","$el","treeChanged","dragStartTree","ut","crossTree","droppable","getElementById","getOf4","currentTreeRootEl","abs","dplhOf4","currentTreeRootOf4","currentNode","ty","targetNodeEl","tiInnerEl","previousSibling","targetPrevEl","getNodeById","executedRuleCache","exec","ruleId","process","env","DEVELOPE_SELF","warn","resolveBranchDroppable","isNodeDroppable","rootChildren","StopException","func","TreeNode","$watch","draggable","getTriggerEl","_draggableDestroy","draggableHelper","ondragstart","startPosition","$emit","autoMoveDragPlaceHolder","ondragend","targetTree","oldTree","replace","Tree","Function","DraggableTreeNode"],"mappings":"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"}